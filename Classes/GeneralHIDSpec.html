<html><head><title>GeneralHIDSpec</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#External Control>HID'>External Control>HID</a></div>
<h1>GeneralHIDSpec</h1>
<div id='summary'>Create access by names to slots of a GeneralHIDDevice</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/Control/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Control/GeneralHIDSpec.sc'>GeneralHIDSpec.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/HIDDeviceService.html">HIDDeviceService</a>, <a href="./../Classes/LID.html">LID</a>, <a href="./../Classes/GeneralHID.html">GeneralHID</a>, <a href="./../Classes/GeneralHIDDevice.html">GeneralHIDDevice</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
<li class='toc2'><a href='#Undocumented class methods'>Undocumented class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*all'>all</a> </li>
<li class='toc3'><a href='#*checkSaveFolder'>checkSaveFolder</a> </li>
<li class='toc3'><a href='#*folder'>folder</a> </li>
<li class='toc3'><a href='#*loadSavedInfo'>loadSavedInfo</a> </li>
<li class='toc3'><a href='#*makeSaveFolder'>makeSaveFolder</a> </li>
<li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*saveAll'>saveAll</a> </li>
</ul></ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-add'>add</a> </li>
<li class='toc3'><a href='#-at'>at</a> </li>
<li class='toc3'><a href='#-value'>value</a> </li>
<li class='toc3'><a href='#-action'>action</a> </li>
<li class='toc3'><a href='#-bus'>bus</a> </li>
<li class='toc3'><a href='#-createBus'>createBus</a> </li>
<li class='toc3'><a href='#-freeBus'>freeBus</a> </li>
<li class='toc3'><a href='#-freeAllBuses'>freeAllBuses</a> </li>
<li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-createAllBuses'>createAllBuses</a> </li>
<li class='toc3'><a href='#-device'>device</a> </li>
<li class='toc3'><a href='#-find'>find</a> </li>
<li class='toc3'><a href='#-fromFile'>fromFile</a> </li>
<li class='toc3'><a href='#-info'>info</a> </li>
<li class='toc3'><a href='#-map'>map</a> </li>
<li class='toc3'><a href='#-save'>save</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><div class='warning'><span class='warninglabel'>WARNING:</span> This class will be deprecated. For working with human interface devices, consult <a href="./../Guides/Working_with_HID.html">Working with HID</a>.</div><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h3><a class='anchor' name='Undocumented class methods'>Undocumented class methods</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*all' href='./../Overviews/Methods.html#all'>all</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*all' href='./../Overviews/Methods.html#all'>all</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*checkSaveFolder' href='./../Overviews/Methods.html#checkSaveFolder'>checkSaveFolder</a> </h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*folder' href='./../Overviews/Methods.html#folder'>folder</a> </h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*loadSavedInfo' href='./../Overviews/Methods.html#loadSavedInfo'>loadSavedInfo</a> </h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*makeSaveFolder' href='./../Overviews/Methods.html#makeSaveFolder'>makeSaveFolder</a> </h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>dev</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*saveAll' href='./../Overviews/Methods.html#saveAll'>saveAll</a> </h3>
<h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-add' href='./../Overviews/Methods.html#add'>add</a> (<span class='argstr'>key</span>, <span class='argstr'>slot</span>)</h3>
<div class='method'>
<p>define a key to a slot</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-at' href='./../Overviews/Methods.html#at'>at</a> (<span class='argstr'>key</span>)</h3>
<div class='method'>
<p>get the slot</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-value' href='./../Overviews/Methods.html#value'>value</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-value' href='./../Overviews/Methods.html#value'>value</a>_ (<span class='argstr'>key</span>, <span class='argstr'>value</span>)</h3>
<div class='method'>
<p>get or set the slot</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-action' href='./../Overviews/Methods.html#action'>action</a><h3 class='imethodname'><span class='methprefix'>-</span><a name='-action' href='./../Overviews/Methods.html#action'>action</a>_ (<span class='argstr'>key</span>, <span class='argstr'>action</span>)</h3>
<div class='method'>
<p>set the action</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-bus' href='./../Overviews/Methods.html#bus'>bus</a> (<span class='argstr'>key</span>)</h3>
<div class='method'>
<p>get the bus</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-createBus' href='./../Overviews/Methods.html#createBus'>createBus</a> (<span class='argstr'>name</span>, <span class='argstr'>server</span>)</h3>
<div class='method'>
<p>create the bus</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-freeBus' href='./../Overviews/Methods.html#freeBus'>freeBus</a> (<span class='argstr'>name</span>)</h3>
<div class='method'>
<p>free the bus</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-freeAllBuses' href='./../Overviews/Methods.html#freeAllBuses'>freeAllBuses</a> </h3>
<div class='method'>
<p>free all buses</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-createAllBuses' href='./../Overviews/Methods.html#createAllBuses'>createAllBuses</a> (<span class='argstr'>server</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-device' href='./../Overviews/Methods.html#device'>device</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-find' href='./../Overviews/Methods.html#find'>find</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-fromFile' href='./../Overviews/Methods.html#fromFile'>fromFile</a> (<span class='argstr'>name</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-info' href='./../Overviews/Methods.html#info'>info</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-map' href='./../Overviews/Methods.html#map'>map</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-save' href='./../Overviews/Methods.html#save'>save</a> (<span class='argstr'>name</span>)</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>// Look for the devices that are attached:
GeneralHID.buildDeviceList;

// Get the list of devices:
d = GeneralHID.deviceList;

// Check which devices have been found:
GeneralHID.postDevices;

// Pick the 6th device and open it and create an instance of it:
a = GeneralHID.open( d[5] )

// Get info on the device to see if it is the right one:
a.info;

// Start eventloop:
GeneralHID.startEventLoop

// Get the capabilities of the device in a readable format:
a.caps;

// See if data is coming in:
a.debug_( true );

// make an instance of a spec:
b = GeneralHIDSpec.new( a );

( // defining the spec.
// trick: look at the debug output, by using each input thing on the gamepad and use the first two numbers posted as indexes
// example output of debug: [ 3, 2, 0.49803921568627, nil ]
// as a result of moving the y-axis of the right joystick.
// so we create this slot:
b.add( \ry, [3,2] );

// and so on...
b.add( \lx, [3,0] );
b.add( \ly, [3,1] );
b.add( \rx, [3,5] );

b.add( \b1, [1,288] );
b.add( \b2, [1,289] );
b.add( \b3, [1,290] );
b.add( \b4, [1,291] );
b.add( \b5, [1,292] );
b.add( \b6, [1,293] );
b.add( \b7, [1,294] );
b.add( \b8, [1,295] );

b.add( \b5, [1,292] );
b.add( \b6, [1,293] );
b.add( \b7, [1,294] );
b.add( \b8, [1,295] );

b.add( \cx, [3,16] );
b.add( \cy, [3,17] );

b.add( \bl, [1,296] );
b.add( \br, [1,297] );

b.add( \bj1, [1,298] );
b.add( \bj2, [1,299] );
)

// Stop it:
a.debug_( false );

// look at the map
b.map.postcs;

// store it with a name:
b.save( "Impact" );

// find matching, previously stored specs:
c = b.find;

// load from file:
b.fromFile( "Impact" );

// the loading and storing mechanism works across SC sessions, as they are stored to file, and GeneralHIDSpec loads the device info of all stored specs at startup of the language.

/// A GeneralHIDDevice automatically has a spec, so we can access it even faster:

a.spec;

// to find and set a spec:
a.findSpec;
a.setSpec( "Impact" );

// post the mapping
a.spec.map

// examples of use:
s = Server.local.boot;

// create a bus
b.createBus( \rx, s );
b.createBus( \b1, s );


// simple example:
(
SynthDef( \hidbus_help, { |out=0,amp=0.5|
    Out.ar( out, SinOsc.ar( 300, 0, 0.2*(amp-0.5) ) );
}).add;
)

x = Synth.new( \hidbus_help );
x.map( \amp, b.at( \rx ).bus );
x.free;

( // a nicer version:
SynthDef( \hidbus_help, { |out=0,amp=0.5,amp2=0|
    Out.ar( out, SinOsc.ar( 300, 0, 0.2*(amp-0.5).lag( 0.1 ) * amp2.lag(0.01,0.99) ) );
}).add;
)

x = Synth.new( \hidbus_help );
x.map( \amp, b.at( \rx ).bus );
x.map( \amp2, b.at( \b1 ).bus );
x.free;

( // an even nicer version:
SynthDef( \hidbus_help, { |out=0,freqadd=0,amp=0,fmmul=200|
    Out.ar( out, SinOsc.ar( 300 + (freqadd.lag(0.2,1)*fmmul), 0, 0.2*amp.lag(0.01,0.99) ) );
}).add;
)


// if you want to have buses for all the things defined in the spec, you can use:
b.createAllBuses( s );

(
x = [ Synth.new( \hidbus_help ), Synth.new( \hidbus_help ) ];
x[0].map( \freqadd, b.bus( \ly ) );
x[0].map( \amp, b.bus( \b6 ) );

x[1].map( \freqadd, b.bus( \lx ) );
x[1].map( \amp, b.bus( \b7 ) );

y = [ Synth.new( \hidbus_help, [\fmmul,400] ), Synth.new( \hidbus_help, [\fmmul,400] ) ];
y[0].map( \freqadd, b.bus( \ry ) );
y[0].map( \amp, b.bus( \b5 ) );

y[1].map( \freqadd, b.bus( \rx ) );
y[1].map( \amp, b.bus( \b6 ) );
)

// see what's going on on the server
s.queryAllNodes( true );

// free the synths
y.do{ |it| it.free; }; x.do{ |it| it.free; };



// To free all buses
b.freeAllBuses;

// Close the device after use:

a.close;

GeneralHID.stopEventLoop</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/GeneralHIDSpec.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/GeneralHIDSpec.schelp</a><br>link::Classes/GeneralHIDSpec::<br>sc version: 3.7alpha1</div></div></body></html>