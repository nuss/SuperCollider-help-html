<!doctype html><html lang='en'><head><title>PreProcessor | SuperCollider 3.13.0 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'PreProcessor';
var scdoc_sc_version = '3.13.0';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>PreProcessor:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*current'>current</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-translate'>translate</a> </li>
<li class='toc3'><a href='#-value'>value</a> </li>
<li class='toc3'><a href='#-startDelimiter'>startDelimiter</a> </li>
<li class='toc3'><a href='#-endDelimiter'>endDelimiter</a> </li>
<li class='toc3'><a href='#-verbose'>verbose</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#Examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes (extension)</span>
 | <span id='categories'><a href='./../Browse.html#Language'>Language</a> | <a href='./../Browse.html#Little Languages'>Little Languages</a></span>
</div><h1>PreProcessor<span id='superclasses'> : <a href="../Classes/Object.html">Object</a></span>
<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>Embed languages in SuperCollider</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/PreProcessor/classes/PreProcessor.sc' title='/home/stefan/.local/share/SuperCollider/downloaded-quarks/PreProcessor/classes/PreProcessor.sc'>PreProcessor.sc</a></div></div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>Using start and end delimiters, PreProcessor internally converts parts of code into a function that you can call, passing in an event with parameters, to which you may add the results. It returns the event.
<p>See also: <a href="./../Classes/Interpreter.html#-preProcessor">Interpreter: -preProcessor</a>.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>PreProcessor.</span><a class='method-name' name='*current' href='./../Overviews/Methods.html#current'>current</a></h3>
<div class='method'>
<p>The preprocessor active in the current context.</div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-translate' href='./../Overviews/Methods.html#translate'>translate</a>(<span class='argstr'>code</span>, <span class='argstr'>event</span>)</h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>code<td class='argumentdesc'><tr><td class='argumentname'>event<td class='argumentdesc'><textarea class='editor'>(
this.preProcessor = PreProcessor.new;

// prepare an event
e = (
    lang: \minimouse,
    languages:
    (
        minimouse: {|code, event|
            var output;
            output = Pbind(\degree, Pseq(code.ascii).trace % 24, \dur, event[\dur] ? 0.1);
            event.put(\result, output)
        },
        maximouse: {|code, event|
            var output;
            output = Pbind(\freq, Pseq(code.ascii).trace + 200, \dur, event[\dur] ? 0.1);
            event.put(\result, output)
        }
    )

);
);

// ok, assuming such a little interpreter exists for a given language,
// one can now use it in code.


&lt;%ttwtezzazszz szzs azzs %&gt;.value(e).result.play;

// switch language:
e[\lang] = \maximouse;
e[\dur] = 0.03;
&lt;%ttwtezzazszz szzs azzs %&gt;.value(e).result.play;

// reset it:
this.preProcessor = nil;</textarea>
</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-value' href='./../Overviews/Methods.html#value'>value</a>(<span class='argstr'>string</span>)</h3>
<div class='method'>
<p>This method is used in <a href="./../Classes/Interpreter.html">Interpreter</a> and is called before any code is interpreted.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>string<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-startDelimiter' href='./../Overviews/Methods.html#startDelimiter'>startDelimiter</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-startDelimiter' href='./../Overviews/Methods.html#startDelimiter'>startDelimiter</a> = value</h3>
<div class='method'>
<p>The signal to start to interpret the string following it as a certain language. By default, this is <code>"&lt;%"</code>.<div class='note'><span class='notelabel'>NOTE:</span> If you set the delimiters to a string that is valid part of sclang code, you may not be able to evaluate code anymore, and thus get stuck in an error state. In such a case, you need to recompile the library.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-endDelimiter' href='./../Overviews/Methods.html#endDelimiter'>endDelimiter</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-endDelimiter' href='./../Overviews/Methods.html#endDelimiter'>endDelimiter</a> = value</h3>
<div class='method'>
<p>The signal to end to interpret the string following it as a certain language. By default, this is <code>"%&gt;"</code>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-verbose' href='./../Overviews/Methods.html#verbose'>verbose</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-verbose' href='./../Overviews/Methods.html#verbose'>verbose</a> = value</h3>
<div class='method'>
<p>If set to true, the preprocessor prints information to the post window.</div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='Examples'>Examples</a></h2>
<textarea class='editor'>// python preprocessor, given that you have python installed
// thanks to  tasos tsesmetzis
(
this.preProcessor = PreProcessor.new.startDelimiter_("{-").endDelimiter_("-}");

// a simple python call
e = (
    lang: \python,
    languages:
    (
        python: // code is the incoming string, event is the event for parameters and output
        {|code, event|
            var input, pipe, output;
            code = e[\prefix] ++ "print" ++ "(" ++ code ++ ")";
            input = "python -c '%'".format(code);
            pipe = Pipe(input, "r");
            output = pipe.readUpTo;
            pipe.close;
            event.put(\result, output)
        }
    ),
    prefix: "import math;"
);
);

// ok, assuming such a little interpreter exists for a given language,
// one can now use it in code.

// returns 507580213877224798800856812176625227226004528988036003099405939480985600000000000000
(
e = {- math.factorial(61) -}.value(e);
e.result;
)


// sonify the digits of the result
e.calc_result = e.result.as(Array).collect { |x| x.asString.interpret };
Pbind(\note, Pseq(e.calc_result), \dur, 0.1).play;

// reset
this.preProcessor = nil;</textarea>
<div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/PreProcessor/HelpSource/Classes/PreProcessor.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/PreProcessor/HelpSource/Classes/PreProcessor.schelp</a><br>link::Classes/PreProcessor::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>