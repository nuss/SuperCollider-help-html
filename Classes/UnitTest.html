<!doctype html><html lang='en'><head><title>UnitTest | SuperCollider 3.9.0-beta1 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script>
var helpRoot = './..';
var scdoc_title = 'UnitTest';
var scdoc_sc_version = '3.9.0-beta1';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
</head>
<body onload='fixTOC();prettyPrint()'>
<div id='toc'>
<div id='toctitle'>UnitTest: table of contents</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*gui'>gui</a> </li>
<li class='toc3'><a href='#*runTest'>runTest</a> </li>
<li class='toc3'><a href='#*runAll'>runAll</a> </li>
<li class='toc3'><a href='#*runTestClassForClass'>runTestClassForClass</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-run'>run</a> </li>
<li class='toc3'><a href='#-runTestMethod'>runTestMethod</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#Writing%20tests%20by%20subclassing%20UnitTest'>Writing tests by subclassing UnitTest</a></li>
<ul class='toc'><li class='toc3'><a href='#.assert'>assert</a> </li>
<li class='toc3'><a href='#.assertFloatEquals'>assertFloatEquals</a> </li>
<li class='toc3'><a href='#.assertArrayFloatEquals'>assertArrayFloatEquals</a> </li>
<li class='toc3'><a href='#.ifAsserts'>ifAsserts</a> </li>
<li class='toc3'><a href='#.wait'>wait</a> </li>
<li class='toc3'><a href='#.bootServer'>bootServer</a> </li>
<li class='toc3'><a href='#.failed'>failed</a> </li>
<li class='toc2'><a href='#UnitTest%20(sub)class%20example.'>UnitTest (sub)class example.</a></li>
<ul class='toc'></ul></ul></ul></div><div class='contents'>
<div id='menubar'></div>
<div class='header'>
<div id='label'>
<span id='folder'>Classes</span>
 | <span id='categories'><a href='./../Browse.html#Testing'>Testing</a></span>
</div><h1>UnitTest<span id='superclasses'> : <a href="../Classes/Object.html">Object</a></span>
</h1>
<div id='summary'>a class for programmatic testing of classes</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/UnitTesting/UnitTest.sc' title='/usr/local/share/SuperCollider/SCClassLibrary/Common/UnitTesting/UnitTest.sc'>UnitTest.sc</a></div><div id='subclasses'>Subclasses: <a href="../Classes/TestArray.html">TestArray</a>, <a href="../Classes/TestBuffer.html">TestBuffer</a>, <a href="../Classes/TestBus.html">TestBus</a>, <a href="../Classes/TestControlSpec.html">TestControlSpec</a>, <span id='hiddensubclasses' style='display:none;'><a href="../Classes/TestCoreUGens.html">TestCoreUGens</a>, <a href="../Classes/TestCurveWarp.html">TestCurveWarp</a>, <a href="../Classes/TestEnv.html">TestEnv</a>, <a href="../Classes/TestEvent.html">TestEvent</a>, <a href="../Classes/TestFilterUGens.html">TestFilterUGens</a>, <a href="../Classes/TestFloat.html">TestFloat</a>, <a href="../Classes/TestFunction.html">TestFunction</a>, <a href="../Classes/TestKDTree.html">TestKDTree</a>, <a href="../Classes/TestMethod.html">TestMethod</a>, <a href="../Classes/TestMixedBundle.html">TestMixedBundle</a>, <a href="../Classes/TestNetAddr.html">TestNetAddr</a>, <a href="../Classes/TestNoOps.html">TestNoOps</a>, <a href="../Classes/TestNodeProxy.html">TestNodeProxy</a>, <a href="../Classes/TestOSCBundle.html">TestOSCBundle</a>, <a href="../Classes/TestPV_ChainUGen.html">TestPV_ChainUGen</a>, <a href="../Classes/TestPattern.html">TestPattern</a>, <a href="../Classes/TestPatternProxy.html">TestPatternProxy</a>, <a href="../Classes/TestSNSampler.html">TestSNSampler</a>, <a href="../Classes/TestServer.html">TestServer</a>, <a href="../Classes/TestSignal.html">TestSignal</a>, <a href="../Classes/UnitTestScript.html">UnitTestScript</a></span><a class='subclass_toggle' href='#' onclick='javascript:showAllSubclasses(this); return false'>&hellip;&nbsp;see&nbsp;all</a></div>
<div id='related'>See also: <a href="./../Classes/UnitTestResult.html">UnitTestResult</a>, <a href="./../Classes/UnitTestScript.html">UnitTestScript</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>In order to make sure a method works correctly, a test can be implemented that assures the correct behavior.
<p>It is a common practice to write tests to clarify how an object should respond, and it may avoid inconsistencies on the long run. A test is always a subclass of <code class='code prettyprint lang-sc'>UnitTest</code>, implementing at least one method starting with <code class='code prettyprint lang-sc'>test_</code>.<div class='note'><span class='notelabel'>NOTE:</span> UnitTests for the Common library classes are kept in the <code class='code prettyprint lang-sc'>testsuite/classlibrary</code> directory of the SuperCollider sources.
<p>To install, <a href="https://github.com/supercollider/supercollider">download the sources</a> and add the directory to your <code class='code prettyprint lang-sc'>sclang_conf.yaml</code>, either by editing it or via the ScIDE preferences.</div><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>UnitTest.</span><a class='method-name' name='*gui' href='./../Overviews/Methods.html#gui'>gui</a></h3>
<div class='method'>
<p>A graphical interface to run and browse all tests<pre class='code prettyprint lang-sc'>UnitTest.gui</pre>
</div><h3 class='method-code'><span class='method-prefix'>UnitTest.</span><a class='method-name' name='*runTest' href='./../Overviews/Methods.html#runTest'>runTest</a>(<span class='argstr'>methodName</span>)</h3>
<div class='method'>
<p>Run a single test for methodName.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>methodName<td class='argumentdesc'>
<p>Should have the format <code class='code prettyprint lang-sc'>"TestPolyPlayerPool:test_prepareChildrenToBundle"</code><pre class='code prettyprint lang-sc'>UnitTest.reset;
UnitTest.runTest("TestUnitTest:test_assert");</pre>
</table></div><h3 class='method-code'><span class='method-prefix'>UnitTest.</span><a class='method-name' name='*runAll' href='./../Overviews/Methods.html#runAll'>runAll</a></h3>
<div class='method'>
<p>runs all subclasses of UnitTest<pre class='code prettyprint lang-sc'>UnitTest.reset;
UnitTest.runAll;</pre>
</div><h3 class='method-code'><span class='method-prefix'>UnitTest.</span><a class='method-name' name='*runTestClassForClass' href='./../Overviews/Methods.html#runTestClassForClass'>runTestClassForClass</a>(<span class='argstr'>class</span>, <span class='argstr'>reset: true</span>, <span class='argstr'>report: true</span>)</h3>
<div class='method'>
<p>runs testclass for a class<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>class<td class='argumentdesc'>
<p>the class<tr><td class='argumentname'>reset<td class='argumentdesc'>
<p>reset UnitTest environment<tr><td class='argumentname'>report<td class='argumentdesc'>
<p>report on pass/fail</table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-run' href='./../Overviews/Methods.html#run'>run</a>(<span class='argstr'>reset: true</span>, <span class='argstr'>report: true</span>)</h3>
<div class='method'>
<p>All method names that start with test_ are invoked.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>reset<td class='argumentdesc'>
<p>(describe argument here)<tr><td class='argumentname'>report<td class='argumentdesc'>
<p>(describe argument here)</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>(describe returnvalue here)<pre class='code prettyprint lang-sc'>TestUnitTest.new.run;</pre>
</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-runTestMethod' href='./../Overviews/Methods.html#runTestMethod'>runTestMethod</a>(<span class='argstr'>method</span>)</h3>
<div class='method'>
<p>Run a single test method of this class<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>method<td class='argumentdesc'>
<p>the method to run<pre class='code prettyprint lang-sc'>TestUnitTest.new.runTestMethod(TestUnitTest.findMethod(\test_assert));</pre>
</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>(describe returnvalue here)</div></div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='Writing%20tests%20by%20subclassing%20UnitTest'>Writing tests by subclassing UnitTest</a></h2>
<pre class='code prettyprint lang-sc'>YourClass.test</pre>

<p>Runs the test class for <code class='code prettyprint lang-sc'>YourClass</code>, which is assumed to be named <code class='code prettyprint lang-sc'>TestYourClass</code>.
<p>If no test class if found it politely declines.<div class='note'><span class='notelabel'>NOTE:</span> UnitTests for the Common library classes are kept in the CommonTests quark. This enables you to easily install and uninstall these tests.</div>
<p>Make sure to implement the methods <code class='code prettyprint lang-sc'>setUp</code> and <code class='code prettyprint lang-sc'>tearDown</code>. They will be called before and after the test.<h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='assert' href='./../Overviews/Methods.html#assert'>assert</a></h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>test<td class='argumentdesc'>
<p>Make sure that this returns a boolean, where <code class='code prettyprint lang-sc'>true</code> means that the test is passed.<tr><td class='argumentname'>message<td class='argumentdesc'>
<p>posted if report is true.<tr><td class='argumentname'>onFailure<td class='argumentdesc'>
<p>If not <code class='code prettyprint lang-sc'>nil</code>, a failure stops the tests and evaluates this function.<pre class='code prettyprint lang-sc'>UnitTest.new.assert(2 == 2, "Two does equal two.");
UnitTest.new.assert(2 == 2.00001, "Two does equal two.");</pre>
</table></div><h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='assertFloatEquals' href='./../Overviews/Methods.html#assertFloatEquals'>assertFloatEquals</a></h3>
<div class='method'>
<p>Make sure that the two floats <code class='code prettyprint lang-sc'>a</code> and <code class='code prettyprint lang-sc'>b</code> equal within a given range (<code class='code prettyprint lang-sc'>within</code>).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>a<td class='argumentdesc'>
<p>a float<tr><td class='argumentname'>b<td class='argumentdesc'>
<p>a float<tr><td class='argumentname'>message<td class='argumentdesc'>
<p>posted if report is true.<tr><td class='argumentname'>onFailure<td class='argumentdesc'>
<p>If not <code class='code prettyprint lang-sc'>nil</code>, a failure stops the tests and evaluates this function.<pre class='code prettyprint lang-sc'>UnitTest.new.assertFloatEquals(2, 2.00001, "Two does equal two.", 0.00001);
UnitTest.new.assertFloatEquals(2, 2.001, "Two does equal two.", 0.0001);</pre>
</table></div><h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='assertArrayFloatEquals' href='./../Overviews/Methods.html#assertArrayFloatEquals'>assertArrayFloatEquals</a></h3>
<div class='method'>
<p>Make sure that the two arrays of floats <code class='code prettyprint lang-sc'>a</code> and <code class='code prettyprint lang-sc'>b</code> equal within a given range (<code class='code prettyprint lang-sc'>within</code>).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>a<td class='argumentdesc'>
<p>an <code class='code prettyprint lang-sc'>Array</code> of floats<tr><td class='argumentname'>b<td class='argumentdesc'>
<p>an <code class='code prettyprint lang-sc'>Array</code> of floats<tr><td class='argumentname'>message<td class='argumentdesc'>
<p>posted if report is true.<tr><td class='argumentname'>onFailure<td class='argumentdesc'>
<p>If not <code class='code prettyprint lang-sc'>nil</code>, a failure stops the tests and evaluates this function.<pre class='code prettyprint lang-sc'>UnitTest.new.assertArrayFloatEquals([2, 3], [2, 3] + 0.00001, "Same Floats", 0.000001);</pre>
</table></div><h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='ifAsserts' href='./../Overviews/Methods.html#ifAsserts'>ifAsserts</a></h3>
<div class='method'>
<p>Make a further assertion only if it passed, or only if it failed.<pre class='code prettyprint lang-sc'>(
a = UnitTest.new;
a.ifAsserts(2 == 3, "yes", { a.assert(2 == 4) }, { a.assert(1 == 1, "but this is correct") });
)</pre>
</div><h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='wait' href='./../Overviews/Methods.html#wait'>wait</a></h3>
<div class='method'>
<p>Wait for a condition, consider failed after maxTime. Only valid within a test (or a routine).<pre class='code prettyprint lang-sc'>(
{
    s.reboot;
    UnitTest.new.wait(s.serverRunning, "server failed to boot in time", 2);
}.fork
)</pre>
</div><h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='bootServer' href='./../Overviews/Methods.html#bootServer'>bootServer</a></h3>
<div class='method'>
<p>Wait for server boot until continued. Only valid within a test (or a routine).
<p>If already booted, then freeAll and create new allocators.<pre class='code prettyprint lang-sc'>(
{
    UnitTest.new.bootServer(s);
}.fork
)</pre>
</div><h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='failed' href='./../Overviews/Methods.html#failed'>failed</a></h3>
<div class='method'>
<p>call failure directly.<pre class='code prettyprint lang-sc'>UnitTest.new.passed(message: "this passed");</pre>
</div><h3><a class='anchor' name='UnitTest%20(sub)class%20example.'>UnitTest (sub)class example.</a></h3>
<pre class='code prettyprint lang-sc'>TestYourClass : UnitTest {
    setUp {
        // this will be called before each test
    }
    tearDown {
        // this will be called after each test
    }

    test_yourMethod {

        // every method named test_
        // will be run

        this.assert( 6 == 6, "6 should equal 6");

        this.assertEquals( 9, 9, "9 should equal 9");

        this.assertFloatEquals( 4.0 , 1.0 * 4.0 / 4.0  4.0,
            "floating point math should be close to equal");

        // we are inside a Routine, you may wait
        1.0.wait;

        // this will wait until the server is booted
        this.bootServer;

        // if the server is already booted it will free all nodes
        // and create new allocators, giving you a clean slate
        p = { SinOsc.ar };
        p.play;
        p.register;
        // will wait until the condition is true
        // will be considered a failure after 10 seconds
        this.wait( { p.isPlaying }, "waiting for synth to play", 10);
    }
}</pre>
<div class='doclink'>helpfile source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/UnitTest.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/UnitTest.schelp</a><br>link::Classes/UnitTest::<br></div></div></body></html>