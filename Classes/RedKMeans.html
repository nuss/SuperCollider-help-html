<html><head><title>RedKMeans</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES (extension)</div>
<div id='categories'><a href='./../Browse.html#Red>redUniverse>additional'>Red>redUniverse>additional</a></div>
<h1>RedKMeans</h1>
<div id='summary'>k-means clustering</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/redUniverse/classes/additional/RedKMeans.sc'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/redUniverse/classes/additional/RedKMeans.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/RedVector.html">RedVector</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-reset'>reset</a> </li>
<li class='toc3'><a href='#-classify'>classify</a> </li>
<li class='toc3'><a href='#-update'>update</a> </li>
<li class='toc3'><a href='#-k'>k</a> </li>
<li class='toc3'><a href='#-max'>max</a> </li>
<li class='toc3'><a href='#-centroids'>centroids</a> </li>
<li class='toc3'><a href='#-classifications'>classifications</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Group points in space. Similar to KMeans quark by Dan Stowell but this one is implemented slightly differently and also uses <a href="./../Classes/RedVector.html">RedVector</a>.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>k: 5</span>, <span class='argstr'>max: 15</span>)</h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>k<td class='argumentdesc'>
<p>The number of centroids.<tr><td class='argumentname'>max<td class='argumentdesc'>
<p>The maximum number of tries in undecided/borderline situations.</table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-reset' href='./../Overviews/Methods.html#reset'>reset</a> </h3>
<div class='method'>
<p>This will reset any previously calculated centroids on next update.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-classify' href='./../Overviews/Methods.html#classify'>classify</a> (<span class='argstr'>vec</span>)</h3>
<div class='method'>
<p>Test only one vector on the current centroids. Rarely needed.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-update' href='./../Overviews/Methods.html#update'>update</a> (<span class='argstr'>vectors</span>)</h3>
<div class='method'>
<p>Vectors should be an array of <a href="./../Classes/RedVector.html">RedVector</a> objects. The vectors can be of any dimension.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-k' href='./../Overviews/Methods.html#k'>k</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-k' href='./../Overviews/Methods.html#k'>k</a> = value</h3>
<div class='method'>
<p></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-max' href='./../Overviews/Methods.html#max'>max</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-max' href='./../Overviews/Methods.html#max'>max</a> = value</h3>
<div class='method'>
<p></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-centroids' href='./../Overviews/Methods.html#centroids'>centroids</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-centroids' href='./../Overviews/Methods.html#centroids'>centroids</a> = value</h3>
<div class='method'>
<p>An array containing the result after the update method is called. It holds <a href="#-k">-k</a> number of <a href="./../Classes/RedVector.html">RedVector</a> objects representing the found centroids.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-classifications' href='./../Overviews/Methods.html#classifications'>classifications</a> </h3>
<div class='method'>
<p>An array containing the result after the update method is called. It holds indices and have the same size as the number of items in the vectors array. Each index represents which centroid each vector belongs to. So to look up the closest centroid for vector i, do centroids[classifications[i]].</div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>a= RedKMeans(5);
b= {RedVector2D[640, 480].rand}.dup(1000);    //create some test 2d points
a.update(b);            //calculate. results will be in variables centroids and classifications
a.centroids;            //returns a list with 5 centroids
a.classifications;        //returns a list with 1000 centroid indices. one for each vector

(
    w= Window("k-means plot", Rect(100, 100, 640, 480), false);
    w.view.background= Color.black;
    w.drawHook= {
        var colors= {|i| Color.hsv(i/a.k, 1, 1)}.dup(a.k);
        b.do{|vec, i|
            Pen.fillColor= colors[a.classifications[i]];
            Pen.fillRect(Rect.aboutRedVector2D(vec, 1));
        };
        Pen.fillColor= Color.white;
        a.centroids.do{|cent, i|
            Pen.strokeColor= colors[i];
            Pen.strokeOval(Rect.aboutRedVector2D(cent, 8));
            Pen.stringAtPoint(i.asString, Point(cent[0], cent[1]));
        };
    };
    w.front;
)

a.k= 8;                //add some more centroids
a.update(b);            //call update on the same data to recalculate and find the new centroids
a.centroids.size        //will be 8
w.refresh;            //now plot again. 3 new centroids added and the previous ones made room

b= {RedVector2D[640, 480].rand}.dup(1000);    //replace the data completely
a.update(b);            //call update again
w.refresh;            //data changed and old centroids adapted by moving a bit

b= b.copyRange(0, 499);        //strip away half the data
a.update(b);            //call update again
w.refresh;            //data loss and old centroids adapted by moving a tiny bit

a.reset;            //forget centroids
a.update(b);
w.refresh;            //same data but new centroids found


a.classify(RedVector2D[320, 240]);    //test middle point and see which class it would belong to

w.close</pre>

<p><div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/redUniverse/HelpSource/Classes/RedKMeans.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/redUniverse/HelpSource/Classes/RedKMeans.schelp</a><br>link::Classes/RedKMeans::<br>sc version: 3.8dev</div></div></body></html>