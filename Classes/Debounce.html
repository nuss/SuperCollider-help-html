<html><head><title>Debounce</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES (extension)</div>
<div id='categories'><a href='./../Browse.html#Utilities'>Utilities</a></div>
<h1>Debounce</h1>
<div id='summary'>debounce incoming signals from crackly switches.</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /home/stefan/.local/share/SuperCollider/downloaded-quarks/adclib/Classes/<a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/adclib/Classes/Debounce.sc'>Debounce.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-isOn'>isOn</a> </li>
<li class='toc3'><a href='#-set'>set</a> </li>
<li class='toc3'><a href='#-sum'>sum</a> </li>
<li class='toc3'><a href='#-size'>size</a> </li>
<li class='toc3'><a href='#-onFunc'>onFunc</a> </li>
<li class='toc3'><a href='#-offFunc'>offFunc</a> </li>
<li class='toc3'><a href='#-check'>check</a> </li>
<li class='toc3'><a href='#-lastN'>lastN</a> </li>
<li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
</ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Debounce is intended for cleaning up incoming signals from e.g. Arduinos that represent switching buttons. Such buttons often produce occasional wrong values, reporting e.g. off when the switch is on. Debouncing filters such signals, requiring at least e.g. 5 positiv values before actually switching to on.<pre class='code prettyprint lang-sc'>// onFunc runs when on condition is reached, onFunc when off. Size is the number of sequences in a row before triggering.

d = Debounce({ "on!".postln; }, { "off...".postln }, 5);
d.set(1).lastN; // run this several times until on
d.set(0).lastN; // ... and off
d.size = 8;     // change size of lastN
d.set(1).lastN; // run this several times until d goes on.
d.size = 5;

// simulate input from arduino
Tdef(\deb, {
    var dt = 0.03;
    inf.do {
    30.do { d.set(1); dt.wait; };
    "crackly on ".postln;
    rrand(1, 10).do { d.set(2.rand.postln); dt.wait; };
    30.do { d.set(0); dt.wait; };
    "crackly off ".postln;
    rrand(1, 10).do { d.set(2.rand.postln); dt.wait; };
    };
}).play;</pre>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>onFunc</span>, <span class='argstr'>offFunc</span>, <span class='argstr'>size: 5</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>onFunc<td class='argumentdesc'>
<p>a function that runs when on condition is reached<tr><td class='argumentname'>offFunc<td class='argumentdesc'>
<p>a function that runs when off condition is reached<tr><td class='argumentname'>size<td class='argumentdesc'>
<p>the list of how many lastN values to keep</table></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-isOn' href='./../Overviews/Methods.html#isOn'>isOn</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-isOn' href='./../Overviews/Methods.html#isOn'>isOn</a> = value</h3>
<div class='method'>
<p>get and set whether debounce is now on or not</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-set' href='./../Overviews/Methods.html#set'>set</a> (<span class='argstr'>val</span>)</h3>
<div class='method'>
<p>enter next value, and if change of status happened, run onFunc or offFunc<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>val<td class='argumentdesc'>
<p>0 or 1</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-sum' href='./../Overviews/Methods.html#sum'>sum</a> </h3>
<div class='method'>
<p>the current sum of lastN values</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-size' href='./../Overviews/Methods.html#size'>size</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-size' href='./../Overviews/Methods.html#size'>size</a> = value</h3>
<div class='method'>
<p>get and set size of the list of how many lastN values to keep</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-onFunc' href='./../Overviews/Methods.html#onFunc'>onFunc</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-onFunc' href='./../Overviews/Methods.html#onFunc'>onFunc</a> = value</h3>
<div class='method'>
<p>get and set function that triggers when debounce switches to on</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-offFunc' href='./../Overviews/Methods.html#offFunc'>offFunc</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-offFunc' href='./../Overviews/Methods.html#offFunc'>offFunc</a> = value</h3>
<div class='method'>
<p>get and set function that triggers when debounce switches to off</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-check' href='./../Overviews/Methods.html#check'>check</a> </h3>
<div class='method'>
<p>check whether to switch status</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-lastN' href='./../Overviews/Methods.html#lastN'>lastN</a> </h3>
<div class='method'>
<p>the last n values recorded</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><div class='doclink'>source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/adclib/HelpSource/Classes/Debounce.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/adclib/HelpSource/Classes/Debounce.schelp</a><br>link::Classes/Debounce::<br>sc version: 3.8dev</div></div></body></html>