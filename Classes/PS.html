<!doctype html><html lang='en'><head><title>PS | SuperCollider 3.10.1-rc1 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'PS';
var scdoc_sc_version = '3.10.1-rc1';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>PS:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-lastValue'>lastValue</a> </li>
<li class='toc3'><a href='#-lastValues'>lastValues</a> </li>
<li class='toc3'><a href='#-at'>at</a> </li>
<li class='toc3'><a href='#-bufSize'>bufSize</a> </li>
<li class='toc3'><a href='#-srcPat'>srcPat</a> </li>
<li class='toc3'><a href='#-length'>length</a> </li>
<li class='toc3'><a href='#-lengthStream'>lengthStream</a> </li>
<li class='toc3'><a href='#-memoRoutine'>memoRoutine</a> </li>
<li class='toc3'><a href='#-count'>count</a> </li>
<li class='toc3'><a href='#-bufSeq'>bufSeq</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes (extension)</span>
 | <span id='categories'><a href='./../Browse.html#Libraries'>Libraries</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>miSCellaneous'>miSCellaneous</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>miSCellaneous>PSx stream patterns'>PSx stream patterns</a> | <a href='./../Browse.html#Streams-Patterns-Events'>Streams-Patterns-Events</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Streams-Patterns-Events>PSx stream patterns'>PSx stream patterns</a></span>
</div><h1>PS<span id='superclasses'> : <a href="../Classes/PStream.html">PStream</a> : <a href="../Classes/Plazy.html">Plazy</a> : <a href="../Classes/Pattern.html">Pattern</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></span>
<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>Pattern that behaves like a Stream</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/Classes/Patterns/PS.sc' title='/home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/Classes/Patterns/PS.sc'>PS.sc</a></div><div id='related'>See also: <a href="./../Overviews/miSCellaneous.html">miSCellaneous</a>, <a href="./../Tutorials/PSx_stream_patterns.html">PSx stream patterns</a>, <a href="./../Classes/MemoRoutine.html">MemoRoutine</a>, <a href="./../Classes/PSdup.html">PSdup</a>, <a href="./../Classes/PSrecur.html">PSrecur</a>, <a href="./../Classes/PSloop.html">PSloop</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>In general Patterns are stateless. But e.g. for counted embedding in other Patterns the exception of stream-like behaviour is practical. PS might also be used in cases where Streams must not be passed to certain Patterns.<div class='note'><span class='notelabel'>NOTE:</span> Name and implementation of former Pstream has changed with miSCellaneous_v0.9, in compliance with other PSx patterns it's been renamed to PS / PStream, however for backwards compatibility Pstream will still work by subclassing.</div><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>PS.</span><a class='method-name' name='*new' href='./../Overviews/Methods.html#new'>new</a>(<span class='argstr'>srcPat</span>, <span class='argstr'>length: inf</span>, <span class='argstr'>bufSize: 1</span>, <span class='argstr'>copyItems: 0</span>, <span class='argstr'>copySets: 1</span>)</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Creates a new PS object.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>srcPat<td class='argumentdesc'>
<p>Source pattern, might also be event pattern.<tr><td class='argumentname'>length<td class='argumentdesc'>
<p>Number of output items, may be pattern or stream, defaults to inf.<tr><td class='argumentname'>bufSize<td class='argumentdesc'>
<p>Size of buffer to store last values, defaults to 1.<tr><td class='argumentname'>copyItems<td class='argumentdesc'>
<p>Determines if and how to copy items, which are which are either non-Sets or member of Sets. Takes Integer 0 (or false or Symbol \false), 1 (or true or Symbol \true) or 2 (or Symbol \deep). Other values are interpreted as 0. Defaults to 0.
<p>0: original item
<p>1: copy item
<p>2: deepCopy item<tr><td class='argumentname'>copySets<td class='argumentdesc'>
<p>Determines if to copy Sets (and hence Events). Takes Integer 0 (or false or Symbol \false), 1 (or true or Symbol \true). Other values are interpreted as 0. Defaults to 1.
<p>0: original Set
<p>1: copy Set<div class='note'><span class='notelabel'>NOTE:</span> The distinction of copying items and sets makes sense in the case of event streams. Per default Events are copied (<strong>copySets</strong> == 1), not their values (<strong>copyItems</strong> == 0). By playing Events those are used to store additional data (synth ids, msgFuncs â€¦) which is mostly not of interest when refering to the event stream, e.g. with PSx patterns which use MemoRoutine - copied Events will not contain this additional data. If values of Events or values returned directly by the stream (being no kind of Sets) are unstructured then copying makes no sense, this is the normal case, so copyItems defaults to 0. When going to alter the ouput, you might want to set <strong>copyItems</strong> to 1 for a PSx returning simple arrays or 2 for nested arrays (deepCopy). For deepCopying Events you'd have to set <strong>copySets</strong> to 1 and <strong>copyItems</strong> to 2 (an option <strong>copySets</strong> == 2 doesn't exist as it would be contradictory in combination with <strong>copyItems</strong> &lt; 2).</div><div class='note'><span class='notelabel'>NOTE:</span> Copy options concern copying into PS's buffer as well as the output of a Stream derived from the PS. When such a Stream is outputting copies this prevents unintended altering of items from <strong>srcPat</strong>. On the other hand storing copies in PS's buffer prevents these from being altered unintendedly.</div></table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-lastValue' href='./../Overviews/Methods.html#lastValue'>lastValue</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Last value stored in <strong>memoRoutine</strong></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-lastValues' href='./../Overviews/Methods.html#lastValues'>lastValues</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Array of last values stored in <strong>memoRoutine</strong>, latest value is first in array.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-at' href='./../Overviews/Methods.html#at'>at</a>(<span class='argstr'>i</span>)</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Returns ith item of array of last values stored in <strong>memoRoutine</strong> (keep in mind reversed order: last value first)</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-bufSize' href='./../Overviews/Methods.html#bufSize'>bufSize</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-bufSize' href='./../Overviews/Methods.html#bufSize'>bufSize</a> = value</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Size of array of last values.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-srcPat' href='./../Overviews/Methods.html#srcPat'>srcPat</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-srcPat' href='./../Overviews/Methods.html#srcPat'>srcPat</a> = value</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Instance variable getter and setter methods.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-length' href='./../Overviews/Methods.html#length'>length</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-length' href='./../Overviews/Methods.html#length'>length</a> = value</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Instance variable getter and setter methods.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-lengthStream' href='./../Overviews/Methods.html#lengthStream'>lengthStream</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-lengthStream' href='./../Overviews/Methods.html#lengthStream'>lengthStream</a> = value</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Instance variable getter and setter methods.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-memoRoutine' href='./../Overviews/Methods.html#memoRoutine'>memoRoutine</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-memoRoutine' href='./../Overviews/Methods.html#memoRoutine'>memoRoutine</a> = value</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Instance variable getter and setter methods.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-count' href='./../Overviews/Methods.html#count'>count</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Instance variable getter and setter methods. Counts each call of next / value / resume / run on the <strong>memoRoutine</strong>. If several Streams are derived from one PS each call of next on a derived Stream will be counted by the <strong>memoRoutine</strong> and thus by the PS.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-bufSeq' href='./../Overviews/Methods.html#bufSeq'>bufSeq</a>(<span class='argstr'>dropNils: true</span>)</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/PStream.html'>PStream</a></div>
<div class='method'>
<p>Returns items of the array <strong>lastValues</strong>, but in the order in which they appeared, i.e. latest value is first in array.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>dropNils<td class='argumentdesc'>
<p>Boolean. If <strong>dropNils</strong> is true (default), nils will be rejected from the array.</table></div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<textarea class='editor'>(
s = Server.local;
Server.default = s;
s.boot;
)


// PS used to store a sequence of 6 events

(
p = Pbind(
    \midinote, Pwhite(60, 90, 6),
    \dur, Prand([0.2, 0.4], inf)
);

// As the sequence ends with nil, nil is also stored in the buffer of PStream's MemoRoutine.
// Hence to store the whole sequence we must increase the buffer size by 1.

q = PS(p, bufSize: 7);

q.play;
)


// values are shifted, so latest are first

q.lastValues


// method bufSeq gives items in order in which they appeared, dropping nils by default

q.bufSeq


// repeat original sequence

Pseq(q.bufSeq).play


// play in reverse order, as Stream has been finished there's also a nil to be dropped

Pseq(q.lastValues.drop(1)).play


// counted embedding of value patterns
// PLx variants default to repeats = inf

(
p = PLseq([
    PS(PLseq((60..65)), 3),
    PS(PLseq((80..90)), Pwhite(2,5))
]);

x = Pbind(
    \midinote, p,
    \dur, 0.1
).play;
)

x.stop;


// counted embedding of event patterns

(
p = Pbind(
    \midinote, PLseq((55..70)) + Pfunc { [0, [4,5].choose] },
    \dur, 0.2
);

q = Pbind(
    \midinote, PLseq((80..100)),
    \dur, 0.05
);

x = PLseq([
    PS(p, Pwhite(2,6)),
    PS(q, Pwhite(2,6))
]).play;
)

x.stop;</textarea>
<div class='note'><span class='notelabel'>NOTE:</span> Repeated streamifying of a PS is just like resuming a Stream (yes, PS behaves like ... a Stream). For getting a Stream to start at the beginning as defined by the Pattern enclosed by the PS, you'd have to generate a new PS, e.g. by reevaluating its definition or wrapping it into a Function.</div><textarea class='editor'>p = PS(Pseries(), 5);

// evaluate more than once

p.asStream.all;



// compare

q = { PS(Pseries(), 5) };

// evaluate more than once

q.value.asStream.all;



// For recursively generating data see PSrecur.
// Referring to buffered last values of a PS can
// easily be done with method .at.


// canonical brown movement
// define 3 voices refering to a PS
// use separate PS to collect data
// plot

(
p = PS(Pbrown(65, 90, 2.1), inf, 16);
p.iter.nextN(16);

q = Pfunc { p[5] - 7 };
r = Pfunc { p[10] - 14 };
t = Pfunc { p[15] - 21 };

u = PS(Ptuple([p,q,r,t]), bufSize: 100);

a = Plotter().superpose_(true).plotMode_(\plines);
a.value = u.iter.nextN(100).flop
)

// playback stored pitches

(
v = Pbind(
    \midinote, Pseq(u.bufSeq),
    \dur, 0.2
).trace.play
)</textarea>
<div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/HelpSource/Classes/PS.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/HelpSource/Classes/PS.schelp</a><br>link::Classes/PS::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>