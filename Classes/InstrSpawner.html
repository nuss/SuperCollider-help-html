<!doctype html><html lang='en'><head><title>InstrSpawner | SuperCollider 3.10.3-rc1 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'InstrSpawner';
var scdoc_sc_version = '3.10.3-rc1';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>InstrSpawner:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*latency'>latency</a> </li>
<li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-deltaPattern'>deltaPattern</a> </li>
<li class='toc3'><a href='#-deltaStream'>deltaStream</a> </li>
<li class='toc3'><a href='#-delta'>delta</a> </li>
<li class='toc3'><a href='#-clock'>clock</a> </li>
<li class='toc3'><a href='#-spawnGroup'>spawnGroup</a> </li>
<li class='toc3'><a href='#-storeParamsOn'>storeParamsOn</a> </li>
<li class='toc3'><a href='#-asSynthDef'>asSynthDef</a> </li>
<li class='toc3'><a href='#-makeTask'>makeTask</a> </li>
<li class='toc3'><a href='#-spawnNext'>spawnNext</a> </li>
<li class='toc3'><a href='#-update'>update</a> </li>
<li class='toc3'><a href='#-makeResourcesToBundle'>makeResourcesToBundle</a> </li>
<li class='toc3'><a href='#-prepareToBundle'>prepareToBundle</a> </li>
<li class='toc3'><a href='#-freeResourcesToBundle'>freeResourcesToBundle</a> </li>
<li class='toc3'><a href='#-children'>children</a> </li>
<li class='toc3'><a href='#-prepareChildrenToBundle'>prepareChildrenToBundle</a> </li>
<li class='toc3'><a href='#-spawnToBundle'>spawnToBundle</a> </li>
<li class='toc3'><a href='#-didSpawn'>didSpawn</a> </li>
<li class='toc3'><a href='#-startTask'>startTask</a> </li>
<li class='toc3'><a href='#-isPlaying'>isPlaying</a> </li>
<li class='toc3'><a href='#-didStop'>didStop</a> </li>
<li class='toc3'><a href='#-didFree'>didFree</a> </li>
<li class='toc3'><a href='#-cmdPeriod'>cmdPeriod</a> </li>
<li class='toc3'><a href='#-guiClass'>guiClass</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes (extension)</span>
 | <span id='categories'><a href='./../Browse.html#Libraries'>Libraries</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>crucial'>crucial</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>crucial>Instr'>Instr</a> | <a href='./../Browse.html#Libraries'>Libraries</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>crucial'>crucial</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>crucial>Players'>Players</a></span>
</div><h1>InstrSpawner<span id='superclasses'> : <a href="../Classes/Patch.html">Patch</a> : <a href="../Classes/HasPatchIns.html">HasPatchIns</a> : <a href="../Classes/AbstractPlayer.html">AbstractPlayer</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></span>
<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>a Pbind-like spawner that plays an Instr with streams supplied to its inputs</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/Instr/InstrSpawner.sc' title='/home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/Instr/InstrSpawner.sc'>InstrSpawner.sc</a></div><div id='subclasses'>Subclasses: <a href="../Classes/InstrGateSpawner.html">InstrGateSpawner</a></div>
<div id='related'>See also: <a href="./../Classes/Instr.html">Instr</a>, <a href="./../Classes/Pbind.html">Pbind</a>, <a href="./../Classes/InstrGateSpawner.html">InstrGateSpawner</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>a Pbind-like spawner that plays an Instr with streams supplied to its inputs.
<p>One nice feature is that it is easy to supply kr or ar rate Patches to the inputs and this will be played continuously and patched into each event. See examples below.<textarea class='editor'>// start and pchRatio are streamed
(
InstrSpawner({ arg sample,start=0,pchRatio=1.0,env;
    PlayBuf.ar(
        sample.numChannels,
        sample.bufnumIr,
        pchRatio,
        1,
        start * sample.bufFramesIr,
        1
    ) * EnvGen.kr(env,doneAction: 2)
},[
    Sample("a11wlk01.wav"),
    Pbrown(0,1,0.1,inf),
    Prand(
        Array.fill(4,{
            Pseries(rrand(-20,30),[2,-2].choose,rrand(5,20))
        }),inf).midiratio,
    Env.sine(0.2,0.4)

],0.06).play

)</textarea>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>InstrSpawner.</span><a class='method-name' name='*latency' href='./../Overviews/Methods.html#latency'>latency</a></h3>
<h3 class='method-code'><span class='method-prefix'>InstrSpawner.</span><a class='method-name' name='*latency' href='./../Overviews/Methods.html#latency'>latency</a> = value</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>InstrSpawner.</span><a class='method-name' name='*new' href='./../Overviews/Methods.html#new'>new</a>(<span class='argstr'>func</span>, <span class='argstr'>args</span>, <span class='argstr'>deltaPattern: 1.0</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>func<td class='argumentdesc'>
<p>As per <a href="./../Classes/Patch.html">Patch</a>, this may be a function or an <a href="./../Classes/Instr.html">Instr</a> name.<tr><td class='argumentname'>args<td class='argumentdesc'>
<p>as per Patch, nil args will be auto-created.  args that are Players will play continously in their own synths and be patched into  each spawn event synth.  args that are of rate \stream (all Pattern classes are rate 'stream') will be converted to an actual stream using .asStream and then iterated.  args that are of rate \scalar (floats, Envs, samples) will be passed into the instr  function and are subsequently fixed.<tr><td class='argumentname'>deltaPattern<td class='argumentdesc'>
<p>a float or pattern that returns floats.  in seconds  see <a href="./../Classes/InstrGateSpawner.html">InstrGateSpawner</a> for time measured in beats and for variable legato</table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-deltaPattern' href='./../Overviews/Methods.html#deltaPattern'>deltaPattern</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-deltaPattern' href='./../Overviews/Methods.html#deltaPattern'>deltaPattern</a> = value</h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-deltaStream' href='./../Overviews/Methods.html#deltaStream'>deltaStream</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-delta' href='./../Overviews/Methods.html#delta'>delta</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-clock' href='./../Overviews/Methods.html#clock'>clock</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-clock' href='./../Overviews/Methods.html#clock'>clock</a> = </h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-spawnGroup' href='./../Overviews/Methods.html#spawnGroup'>spawnGroup</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-storeParamsOn' href='./../Overviews/Methods.html#storeParamsOn'>storeParamsOn</a>(<span class='argstr'>stream</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>stream<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-asSynthDef' href='./../Overviews/Methods.html#asSynthDef'>asSynthDef</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-makeTask' href='./../Overviews/Methods.html#makeTask'>makeTask</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-spawnNext' href='./../Overviews/Methods.html#spawnNext'>spawnNext</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-update' href='./../Overviews/Methods.html#update'>update</a>(<span class='argstr'>changed</span>, <span class='argstr'>changer</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>changed<td class='argumentdesc'><tr><td class='argumentname'>changer<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-makeResourcesToBundle' href='./../Overviews/Methods.html#makeResourcesToBundle'>makeResourcesToBundle</a>(<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-prepareToBundle' href='./../Overviews/Methods.html#prepareToBundle'>prepareToBundle</a>(<span class='argstr'>agroup</span>, <span class='argstr'>bundle</span>, <span class='argstr'>private: false</span>, <span class='argstr'>bus</span>, <span class='argstr'>defWasLoaded: false</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>agroup<td class='argumentdesc'><tr><td class='argumentname'>bundle<td class='argumentdesc'><tr><td class='argumentname'>private<td class='argumentdesc'><tr><td class='argumentname'>bus<td class='argumentdesc'><tr><td class='argumentname'>defWasLoaded<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-freeResourcesToBundle' href='./../Overviews/Methods.html#freeResourcesToBundle'>freeResourcesToBundle</a>(<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-children' href='./../Overviews/Methods.html#children'>children</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-prepareChildrenToBundle' href='./../Overviews/Methods.html#prepareChildrenToBundle'>prepareChildrenToBundle</a>(<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-spawnToBundle' href='./../Overviews/Methods.html#spawnToBundle'>spawnToBundle</a>(<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-didSpawn' href='./../Overviews/Methods.html#didSpawn'>didSpawn</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-startTask' href='./../Overviews/Methods.html#startTask'>startTask</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-isPlaying' href='./../Overviews/Methods.html#isPlaying'>isPlaying</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-didStop' href='./../Overviews/Methods.html#didStop'>didStop</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-didFree' href='./../Overviews/Methods.html#didFree'>didFree</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-cmdPeriod' href='./../Overviews/Methods.html#cmdPeriod'>cmdPeriod</a></h3>
<div class='method'></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-guiClass' href='./../Overviews/Methods.html#guiClass'>guiClass</a></h3>
<div class='method'></div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<textarea class='editor'>// pchRatio will not stream, is fixed at -1
(

InstrSpawner({ arg sample,start=0,pchRatio=1.0,env;
    PlayBuf.ar( sample.numChannels, sample.bufnumIr,pchRatio,1,start * sample.bufFramesIr,1 )
         * EnvGen.kr(env,doneAction: 2)
},[
    Sample("a11wlk01.wav"),
    Pbrown(0,1,0.1,inf),
    -1,
    Env.sine(0.2,0.4)

],0.125).play

)</textarea>

<p>the Patch in the width input plays continuously and is patched into each spawn event<textarea class='editor'>(
    InstrSpawner({ arg freq,rq,width,fenv,fenvmod,envperc;
         width.debug("width");  // an OutputProxy
        RLPF.ar(
            Pulse.ar(
                freq,
                width
            ),
            EnvGen.kr(fenv,levelScale: fenvmod),
            rq)
               * EnvGen.kr(envperc, 1.0,0.3,doneAction: 2)
    },[
        Pfunc({  15.rand.degreeToKey([ 0, 2, 3, 5, 7, 8, 10 ]).midicps * 3 }),
        0.1,
        Patch({ FSinOsc.kr(0.05).range(0.01,0.99) }),
        Env.asr,
        6000,
        Env.perc(releaseTime: 0.8)
    ],0.125).play
)</textarea>

<p>note: for beats see <a href="./../Classes/InstrGateSpawner.html">InstrGateSpawner</a>
<p> the stereo Patch in the width input causes the InstrSpawner to expand to stereo<textarea class='editor'>(
    InstrSpawner({ arg freq,rq,width,fenv,fenvmod,envperc;
         width.debug("width");  // an OutputProxy
        RLPF.ar(
            Pulse.ar(
                freq,
                width
            ),
            EnvGen.kr(fenv,levelScale: fenvmod),
            rq)
               * EnvGen.kr(envperc, 1.0,0.3,doneAction: 2)
    },[
        Pfunc({  15.rand.degreeToKey([ 0, 2, 3, 5, 7, 8, 10 ]).midicps * 3 }),
        0.1,
        Patch({
            [    FSinOsc.kr(0.05,0.0).range(0.01,0.99),
                FSinOsc.kr(0.05,0.5).range(0.01,0.99),
            ]
             }),
        Env.asr,
        6000,
        Env.perc(releaseTime: 0.8)
    ],0.125).play
)


(

Instr(\InstrSpawner,{ arg freq=1000,amp=0.1,env;

        SinOsc.ar(freq,mul: amp)
        * EnvGen.kr(env,doneAction: 2)
});

i = InstrSpawner(\InstrSpawner,[
                Pbrown(45,90,3,inf).midicps,
                0.1,
                Env.sine // does not get streamed
            ],
            0.1
            );

i.play

)</textarea>

<p>sliders are polled on the gui<textarea class='editor'>(

Instr(\InstrSpawner,{ arg freq=1000,amp=0.1,env;

        SinOsc.ar(freq,mul: amp)
        * EnvGen.kr(env,doneAction: 2)
});

InstrSpawner(\InstrSpawner,[
                nil, // accept a default KrNumberEditor
                nil, // accept a default KrNumberEditor
                Env.sine // does not get streamed
            ],
            NumberEditor(0.1,[0.05,1.0]) // polled each time
    ).gui
)





// how to get eventCount like sc2 Spawn
(

    InstrSpawner({ arg eventCount=0, freq,rq,width,fenv,fenvmod,envperc;

        // do something with eventCount if you need it...

        RLPF.ar(
            Pulse.ar(
                freq,
                width
            ),
            EnvGen.kr(fenv,levelScale: fenvmod),
            rq)
               * EnvGen.kr(envperc, doneAction: 2)
    },[

        Pseries(0,1,inf), // infinite counting

        //aeolian
        Pfunc({  15.rand.degreeToKey([ 0, 2, 3, 5, 7, 8, 10 ]).midicps * 3 }),
        0.1,
        Patch({ LFTri.kr(0.1,[0.0,0.5],0.5,0.5) }),
        Env.asr,
        6000,
        Env.perc(releaseTime: 0.1)
    ],0.25).play
)</textarea>

<p>this is more flexible, is only on when you need it, and lets you do wrapping or scaling of the event count all in the pattern domain.<div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/HelpSource/Classes/InstrSpawner.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/HelpSource/Classes/InstrSpawner.schelp</a><br>link::Classes/InstrSpawner::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>