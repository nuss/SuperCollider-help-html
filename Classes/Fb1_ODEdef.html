<!doctype html><html lang='en'><head><title>Fb1_ODEdef | SuperCollider 3.11.2 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'Fb1_ODEdef';
var scdoc_sc_version = '3.11.2';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>Fb1_ODEdef:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'><li class='toc2'><a href='#References'>References</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*at'>at</a> </li>
<li class='toc3'><a href='#*keys'>keys</a> </li>
<li class='toc3'><a href='#*postAll'>postAll</a> </li>
<li class='toc3'><a href='#*remove'>remove</a> </li>
<li class='toc3'><a href='#*reset'>reset</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-next'>next</a> </li>
<li class='toc3'><a href='#-nextN'>nextN</a> </li>
<li class='toc3'><a href='#-name'>name</a> </li>
<li class='toc3'><a href='#-function'>function</a> </li>
<li class='toc3'><a href='#-name'>name</a> </li>
<li class='toc3'><a href='#-t0'>t0</a> </li>
<li class='toc3'><a href='#-y0'>y0</a> </li>
<li class='toc3'><a href='#-outScale'>outScale</a> </li>
<li class='toc3'><a href='#-diffOutScale'>diffOutScale</a> </li>
<li class='toc3'><a href='#-size'>size</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#Examples%201:%20Defining%20new%20ODEs'>Examples 1: Defining new ODEs</a></li>
<ul class='toc'><li class='toc2'><a href='#Ex.%201a:%20Extending%20the%20harmonic%20oscillator'>Ex. 1a: Extending the harmonic oscillator</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Ex.%201b:%20Extending%20exponential%20decay'>Ex. 1b: Extending exponential decay</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#Ex.%202:%20Language-side%20integration'>Ex. 2: Language-side integration</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes (extension)</span>
 | <span id='categories'><a href='./../Browse.html#Libraries'>Libraries</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>miSCellaneous'>miSCellaneous</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>miSCellaneous>Nonlinear'>Nonlinear</a></span>
</div><h1>Fb1_ODEdef<span id='superclasses'> : <a href="../Classes/Object.html">Object</a></span>
<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>container for ordinary differential equation definitions</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/Classes/Nonlinear/Fb1_ODEdef.sc' title='/home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/Classes/Nonlinear/Fb1_ODEdef.sc'>Fb1_ODEdef.sc</a></div><div id='related'>See also: <a href="./../Overviews/miSCellaneous.html">miSCellaneous</a>, <a href="./../Guides/Introduction_to_miSCellaneous.html">Introduction to miSCellaneous</a>, <a href="./../Classes/Fb1.html">Fb1</a>, <a href="./../Classes/GFIS.html">GFIS</a>, <a href="./../Classes/Fb1_ODE.html">Fb1_ODE</a>, <a href="./../Classes/Fb1_ODEintdef.html">Fb1_ODEintdef</a>, <a href="./../Classes/Fb1_MSD.html">Fb1_MSD</a>, <a href="./../Classes/Fb1_SD.html">Fb1_SD</a>, <a href="./../Classes/Fb1_Lorenz.html">Fb1_Lorenz</a>, <a href="./../Classes/Fb1_Hopf.html">Fb1_Hopf</a>, <a href="./../Classes/Fb1_HopfA.html">Fb1_HopfA</a>, <a href="./../Classes/Fb1_HopfAFDC.html">Fb1_HopfAFDC</a>, <a href="./../Classes/Fb1_VanDerPol.html">Fb1_VanDerPol</a>, <a href="./../Classes/Fb1_Duffing.html">Fb1_Duffing</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>To be used to define ODE systems that can then be audified with Fb1_ODE. See <a href="./../Classes/Fb1_ODE.html">Fb1_ODE</a> for general information about Fb1 ODE integrator UGens.
<p><strong>HISTORY AND CREDITS:</strong> Big credit to David Pirrò from IEM Graz for pointing me to the symplectic integration methods, which are essential for audifying ODEs, as they help to ensure numeric stability in the long run (e.g. to avoid drifts of oscillations that are mathematically expected to be regular). See the chapter on integration in his dissertation <a href="#[2]">[2]</a>, pp 135-146. You might also want check David Pirròs optimized ODE compiler named Henri <a href="#[3]">[3]</a>. Big credit also to Nathaniel Virgo who brought up the buffering strategy used in Fb1, which is Fb1_ODE's working horse.<div class='warning'><span class='warninglabel'>WARNING:</span> Especially with self-defined ODEs the usage of this class is – inherently – highly experimental. Be careful with amplitudes, as always with feedback it can become loud! Sudden blowups might result form the mathematical characteristics of the ODE systems or they might come from parameter changes on which ODEs can react extremely sensitive to, they can also stem from numerical accumulation effects. It is highly recommended to take precautionary measures, e.g. by limiting/distorting operators (tanh, clip, softclip, distort) with the compose option (See <a href="./../Classes/Fb1_ODE.html#Examples%205">Fb1_ODE Examples 5</a>) and/or external limiting and/or using MasterFX from the JITLibExtensions quark.</div><div class='note'><span class='notelabel'>NOTE:</span> Fb1_ODE in its plain form (without <strong>tMul</strong> modulation, use of <strong>compose</strong> etc.) produces audio data as a numerical integration of an ODE initial value problem, defined by Fb1_ODEdef and a numerical procedure, defined by Fb1_ODEintdef. This of course supposes well-defined ODE systems and it should be kept in mind that the Fb1_ODE framework doesn't perform any mathematical checks regarding the principal existence and uniqueness of a solution of a given Fb1_ODEdef.</div><div class='note'><span class='notelabel'>NOTE:</span> The convenience of direct definition of the ODE relation comes with the price of a large number of UGens involved. You might want to allow a higher number of UGens with the server option numWireBufs. For a nice workflow I'd recommended to take reduced blockSizes (e.g. 1, 2, 4, 8, 16) while experimenting as compile time is shorter, but once you have finished the design of a SynthDef it might pay going back to blocksize 32 or 64 for runtime efficiency, especially if many kr UGens are involved.</div>
<p><a class='anchor' name='[1]'>&nbsp;</a><a class='anchor' name='[2]'>&nbsp;</a><a class='anchor' name='[3]'>&nbsp;</a><h3><a class='anchor' name='References'>References</a></h3>
<ol>
<li>Trefethen, Lloyd N.; Birkisson Ásgeir; Driscoll, Tobin A. (2017): Exploring ODEs. SIAM - Society for Industrial and Applied Mathematics. Free download from: <a href="https://people.maths.ox.ac.uk/trefethen/Exploring.pdf">https://people.maths.ox.ac.uk/trefethen/Exploring.pdf</a><li>Pirrò, David (2017). Composing Interactions. Dissertation. Institute of Electronic Music and Acoustics, University of Music and Performing Arts Graz. Free download from: <a href="https://pirro.mur.at/media/pirro_david_composing_interactions_print.pdf">https://pirro.mur.at/media/pirro_david_composing_interactions_print.pdf</a><li><a href="https://git.iem.at/davidpirro/henri">https://git.iem.at/davidpirro/henri</a></ol>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>Fb1_ODEdef.</span><a class='method-name' name='*new' href='./../Overviews/Methods.html#new'>new</a>(<span class='argstr'>name</span>, <span class='argstr'>function</span>, <span class='argstr'>t0: 0</span>, <span class='argstr'>y0</span>, <span class='argstr'>outScale: 1</span>, <span class='argstr'>diffOutScale: 1</span>)</h3>
<div class='method'>
<p>Creates a new Fb1_ODEdef object.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>name<td class='argumentdesc'>
<p>The name of the ODE, expects a Symbol. Default Fb1_ODEdefs cannot be overwritten.<tr><td class='argumentname'>function<td class='argumentdesc'>
<p>The implementation of the function F which describes the ODE given as Y'(t) = F(t, Y(t)) where Y, F can be a single-valued or vector-valued. It must take time as first and a system state (possibly an array) as second parameter and optional further args that can also be arrays. The system state is expected to have the size of the system (given by <strong>y0</strong>'s size), the function's return value must also equal this size. If the system size is greater than 1 the components of the output array should be rather written as Functions, as this optimizes the compile process with symplectic integration procedures, it isn't compulsory though. See examples below and in the source file Fb1_ODEdef.sc.<tr><td class='argumentname'>t0<td class='argumentdesc'>
<p>Number. Default initial time value. <tr><td class='argumentname'>y0<td class='argumentdesc'>
<p>Default initial value of the ODE. Expects number or array and determines the size of the system, <strong>function</strong>'s second arg and return value must be of same size.<tr><td class='argumentname'>outScale<td class='argumentdesc'>
<p>Number that determines the default multiplier for the integration signal produced by Fb1_ODE when the latter's <strong>withOutScale</strong> flag is set to true (default). Defaults to 1. Especially thought for systems like Lorenz which produce high levels with standard parameters, then it makes sense to set <strong>outScale</strong> to a value smaller than 1.<div class='warning'><span class='warninglabel'>WARNING:</span> <strong>outScale</strong> / <strong>diffOutScale</strong> / <strong>withOutScale</strong> do not implement a general safety net functionality, <strong>withOutScale</strong> 's default value true does by no means say that output is limited. The default scaling values of predefined Fb1_ODEdefs are average assumptions and can, under different circumstances, always lead to high out levels.</div><tr><td class='argumentname'>diffOutScale<td class='argumentdesc'>
<p>Number that determines the default multiplier for the differential signal produced by Fb1_ODE when the latter's <strong>withOutScale</strong> flag is set to true (default). Defaults to 1. Especially thought for systems like Lorenz which produce high levels with standard parameters, then it makes sense to set <strong>outScale</strong> to a value smaller than 1.<div class='warning'><span class='warninglabel'>WARNING:</span> <strong>outScale</strong> / <strong>diffOutScale</strong> / <strong>withOutScale</strong> do not implement a general safety net functionality, <strong>withOutScale</strong>'s default value true does by no means say that output is limited. The default scaling values of predefined Fb1_ODEdefs are average assumptions and can, under different circumstances, always lead to high out levels.</div></table></div><h3 class='method-code'><span class='method-prefix'>Fb1_ODEdef.</span><a class='method-name' name='*at' href='./../Overviews/Methods.html#at'>at</a>(<span class='argstr'>key</span>)</h3>
<div class='method'>
<p>Returns the Fb1_ODEdef instance of the Symbol <strong>key</strong> if it exists.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>key<td class='argumentdesc'>
<p>Symbol. </table></div><h3 class='method-code'><span class='method-prefix'>Fb1_ODEdef.</span><a class='method-name' name='*keys' href='./../Overviews/Methods.html#keys'>keys</a></h3>
<div class='method'>
<p>Returns an array of all keys of currently stored Fb1_ODEdefs.</div><h3 class='method-code'><span class='method-prefix'>Fb1_ODEdef.</span><a class='method-name' name='*postAll' href='./../Overviews/Methods.html#postAll'>postAll</a></h3>
<div class='method'>
<p>Posts all keys of currently stored Fb1_ODEdefs.</div><h3 class='method-code'><span class='method-prefix'>Fb1_ODEdef.</span><a class='method-name' name='*remove' href='./../Overviews/Methods.html#remove'>remove</a>(<span class='argstr'>key</span>)</h3>
<div class='method'>
<p>Removes the Fb1_ODEdef of the Symbol <strong>key</strong> from the Dictionary.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>key<td class='argumentdesc'>
<p>Symbol. </table></div><h3 class='method-code'><span class='method-prefix'>Fb1_ODEdef.</span><a class='method-name' name='*reset' href='./../Overviews/Methods.html#reset'>reset</a></h3>
<div class='method'>
<p>Removes all Fb1_ODEdefs other than the predefined ones from the Dictionary.</div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-next' href='./../Overviews/Methods.html#next'>next</a>(<span class='argstr'>intType</span>, <span class='argstr'>t</span>, <span class='argstr'>y</span>, <span class='argstr'>dt</span>, <span class='argstr'>args</span>)</h3>
<div class='method'>
<p>Method for language-side integration, gives next value based on previous data.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>intType<td class='argumentdesc'>
<p>Integration type. Expects one of the Symbols, for which procedures are stored with Fb1_ODEintdef. The use of symplectic procedures (with prefix 'sym', like 'sym2') is highly recommended. For more accurate integration you can try symplectic procedures of higher order like \sym4, \sym8 etc. Multi-step procedures are not implemented, remaining: <ul>
<li>Symplectic: \sym2, \sym2_d, \sym4, \sym4_d, \sym6, \sym6_d, \sym8, \sym8_d, \sym12, \sym12_d, \sym16, \sym16_d, \sym32, \sym32_d, \sym64, \sym64_d<li>Euler: \eu, \eu_d, \eum, \eum_d, \eui, \eui_d<li>Prediction-Evaluation-Correction: \pec, \pece, \pecec, \pecece<li>Runge-Kutta: \rk3, \rk3_d, \rk3h, \rk3h_d, \rk4, \rk4_d</ul>
<tr><td class='argumentname'>t<td class='argumentdesc'>
<p>Previous time, expects Number.<tr><td class='argumentname'>y<td class='argumentdesc'>
<p>Previous state, expects Number or Array of system size.<tr><td class='argumentname'>dt<td class='argumentdesc'>
<p>Number. Time delta. <tr><td class='argumentname'>args<td class='argumentdesc'>
<p>List of additional args to be passed to Fb1_ODEdef's function. </table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-nextN' href='./../Overviews/Methods.html#nextN'>nextN</a>(<span class='argstr'>n</span>, <span class='argstr'>intType</span>, <span class='argstr'>t</span>, <span class='argstr'>y</span>, <span class='argstr'>dt</span>, <span class='argstr'>args</span>, <span class='argstr'>withTime: false</span>, <span class='argstr'>includeStart: true</span>)</h3>
<div class='method'>
<p>Method for language-side integration, gives an array of next <strong>n</strong> values (arrays) based on previous data. Last values (arrays) are stored at last position. For intTypes with sizeFactor 2 the differential is included. See Examples. <h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>n<td class='argumentdesc'>
<p>Integer. Number of next values (resp. value arrays) to be calculated. <tr><td class='argumentname'>intType<td class='argumentdesc'>
<p>Integration type. Expects one of the Symbols, for which procedures are stored with Fb1_ODEintdef. The use of symplectic procedures (with prefix 'sym', like 'sym2') is highly recommended. For more accurate integration you can try symplectic procedures of higher order like \sym4, \sym8 etc. Multi-step procedures are not implemented, remaining: <ul>
<li>Symplectic: \sym2, \sym2_d, \sym4, \sym4_d, \sym6, \sym6_d, \sym8, \sym8_d, \sym12, \sym12_d, \sym16, \sym16_d, \sym32, \sym32_d, \sym64, \sym64_d<li>Euler: \eu, \eu_d, \eum, \eum_d, \eui, \eui_d<li>Prediction-Evaluation-Correction: \pec, \pece, \pecec, \pecece<li>Runge-Kutta: \rk3, \rk3_d, \rk3h, \rk3h_d, \rk4, \rk4_d</ul>
<tr><td class='argumentname'>t<td class='argumentdesc'>
<p>Previous time, expects Number.<tr><td class='argumentname'>y<td class='argumentdesc'>
<p>Previous state, expects Number or Array of system size.<tr><td class='argumentname'>dt<td class='argumentdesc'>
<p>Number. Time delta. <tr><td class='argumentname'>args<td class='argumentdesc'>
<p>List of additional args to be passed to Fb1_ODEdef's function. <tr><td class='argumentname'>withTime<td class='argumentdesc'>
<p>Boolean. Determines if integrated time should be included. Defaults to false.<tr><td class='argumentname'>includeStart<td class='argumentdesc'>
<p>Boolean. Determines if start value(s) should be included. Defaults to true.</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-name' href='./../Overviews/Methods.html#name'>name</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's name.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-function' href='./../Overviews/Methods.html#function'>function</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's function.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-name' href='./../Overviews/Methods.html#name'>name</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's name.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-t0' href='./../Overviews/Methods.html#t0'>t0</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's t0.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-y0' href='./../Overviews/Methods.html#y0'>y0</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's y0.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-outScale' href='./../Overviews/Methods.html#outScale'>outScale</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's outScale.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-diffOutScale' href='./../Overviews/Methods.html#diffOutScale'>diffOutScale</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's diffOutScale.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-size' href='./../Overviews/Methods.html#size'>size</a></h3>
<div class='method'>
<p>Getter for the Fb1_ODEdef's system size.</div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='Examples%201:%20Defining%20new%20ODEs'>Examples 1: Defining new ODEs</a></h2>
<textarea class='editor'>// reboot with reduced blockSize

(
s = Server.local;
Server.default = s;
s.options.blockSize = 8;
s.reboot;
)</textarea>

<p><a class='anchor' name='Ex.%201a'>&nbsp;</a><h3><a class='anchor' name='Ex.%201a:%20Extending%20the%20harmonic%20oscillator'>Ex. 1a: Extending the harmonic oscillator</a></h3>
<textarea class='editor'>// This seems to be an interesting strategy.
// We can e.g. try to multiply one of its equations with a term near 1,
// so start with rather small k and investigate

// y'(t) = w(t)
// w'(t) = -y(t) * (1 + (k * w(t)))

 
(
Fb1_ODEdef(\harmonic_ext_1, { |t, y, k|
    [
        y[1], 
        y[0].neg * (1 + (k * y[1]))
    ]
}, 0, [0, 1], 1, 1); 
)


// brassy sound

(
x = {
    var sig = Fb1_ODE.ar(\harmonic_ext_1,
        [1], 1500, 0, [0, 1],
    ) * 0.1;
    sig
}.play
)

x.release


// with oscillating k the system tends to become unstable
// but with softclip per sample it can be kept 
// (see chapter 'compose' option in Fb1_ODE help)

(
x = {
    var sig = Fb1_ODE.ar(\harmonic_ext_1,
        // k oscillates between 1 and 3
        [SinOsc.ar(50).lincurve(-1, 1, 1, 3, 2)],
        1500, 0, [0, 1],
        compose: \softclip
    ) * 0.1;
    sig
}.play
)

x.release


// an oscillation between 1 and higher values totally changes the spectrum

(
x = {
    var sig = Fb1_ODE.ar(\harmonic_ext_1,
        // k oscillates between 1 and 10
        [SinOsc.ar(50).lincurve(-1, 1, 1, 10, 2)],
        1500, 0, [0, 1],
        compose: \softclip
    ) * 0.1;
    sig
}.play
)

x.release


// play with the two states

(
x = {
    var sig = Fb1_ODE.ar(\harmonic_ext_1,
        // upper oscillation bound for k oscillates itself between 2 and 15
        [SinOsc.ar(50).lincurve(-1, 1, 1, SinOsc.ar(SinOsc.ar(0.2).exprange(0.2, 15)).range(2, 15), 2)],
        1500, 0, [0, 1],
        compose: \softclip
    ) * 0.1;
    sig
}.play
)

x.release</textarea>

<p><a class='anchor' name='Ex.%201b'>&nbsp;</a><h3><a class='anchor' name='Ex.%201b:%20Extending%20exponential%20decay'>Ex. 1b: Extending exponential decay</a></h3>
<textarea class='editor'>// exponential decay is described by the equation
// y'(t) = -y(t)

// an oscillating decay can e.g. be got by
// y'(t) = -y(t) * sin(t)
// the analytic solution includes a log of the sine,
// so we get more partials


(
Fb1_ODEdef(\exp_decay_raw, { |t, y|
    y.neg * sin(t)
}, 0, 1, 1, 1);
)


(
x = {
    var sig = Fb1_ODE.ar(\exp_decay_raw,
        tMul: 100 * 2pi,
        compose: \softclip
    ) ! 2;
    Line.kr(dur: 10, doneAction: 2);
    sig
}.play
)

x.release


// multiplication with a second sine with multiplied time leads to strange and interesting results

(
Fb1_ODEdef(\exp_decay_extended, { |t, y, k|
    y.neg * (sin(t) * sin(k * t))
}, 0, 1, 1, 1);
)



// ATTENTION: danger of blowup, can be reduced with softclip composition per sample
// constant values lead to ring modulation-like effects ...

(
x = {
    var sig = Fb1_ODE.ar(\exp_decay_extended,
        [2.7], 100 * 2pi, 0, 1,
        compose: \softclip
    );
    Line.kr(dur: 10, doneAction: 2);
    sig ! 2
}.play
)

x.release


// ... whereas modulations produce more complex changing spectra
(
x = {
    var sig = Fb1_ODE.ar(\exp_decay_extended,
        [SinOsc.ar(120).range(3, 3.01)], 100 * 2pi, 0, 1,
        compose: \softclip
    );
    Line.kr(dur: 10, doneAction: 2);
    sig ! 2
}.play
)

x.release


// for decorrelated stereo we can expand to two independent equations
// k should be of size 2

(
Fb1_ODEdef(\exp_decay_extended_2, { |t, y, k|
    [
        y[0].neg * (sin(t) * sin(k[0] * t)),
        y[1].neg * (sin(t) * sin(k[1] * t))
    ]
}, 0, [1, 1], 1, 1);
)

(
x = {
    var sig = Fb1_ODE.ar(\exp_decay_extended_2,
        [SinOsc.ar(120).range([3, 3.01], [3.01, 3.02])], 100 * 2pi, 0, [1, 1],
        compose: \softclip
    );
    Line.kr(dur: 10, doneAction: 2);
    sig
}.play
)

x.release</textarea>

<p><a class='anchor' name='Ex.%202'>&nbsp;</a><h2><a class='anchor' name='Ex.%202:%20Language-side%20integration'>Ex. 2: Language-side integration</a></h2>
<textarea class='editor'>// Possible though not optimized.
// For longer sections it's probably better to employ Fb1 ODE solvers, 
// store audio in a buffer and load it into a float array,
// for quick tests it might be useful though. 

// integrate begin of a Lorenz system, last array is last state, so flop for plot

(
a = Fb1_ODEdef.at(\Lorenz).nextN(
    n: 1000,
    intType: \sym2,
    t: 0, 
    y: [1, 1, 1],
    dt: 1/100,
    args: [30, 12, 2]
);

a.flop.plot
)</textarea>
<div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/HelpSource/Classes/Fb1_ODEdef.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/HelpSource/Classes/Fb1_ODEdef.schelp</a><br>link::Classes/Fb1_ODEdef::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>