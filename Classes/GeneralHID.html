<html><head><title>GeneralHID</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#External Control>HID'>External Control>HID</a></div>
<h1>GeneralHID</h1>
<div id='summary'>A uniform class to access HID devices</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/Control/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Control/GeneralHID.sc'>GeneralHID.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/HIDDeviceService.html">HIDDeviceService</a>, <a href="./../Classes/LID.html">LID</a>, <a href="./../Classes/GeneralHIDDevice.html">GeneralHIDDevice</a>, <a href="./../Classes/GeneralHIDSpec.html">GeneralHIDSpec</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'><li class='toc2'><a href='#Some outstanding issues'>Some outstanding issues</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Further information'>Further information</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*scheme'>scheme</a>  <a href='#*current'>current</a> </li>
<li class='toc3'><a href='#*buildDeviceList'>buildDeviceList</a> </li>
<li class='toc3'><a href='#*deviceList'>deviceList</a> </li>
<li class='toc3'><a href='#*postDevices'>postDevices</a> </li>
<li class='toc3'><a href='#*postDevicesAndProperties'>postDevicesAndProperties</a> </li>
<li class='toc3'><a href='#*startEventLoop'>startEventLoop</a> </li>
<li class='toc3'><a href='#*stopEventLoop'>stopEventLoop</a> </li>
<li class='toc3'><a href='#*eventLoopIsRunning'>eventLoopIsRunning</a> </li>
<li class='toc3'><a href='#*open'>open</a> </li>
<li class='toc3'><a href='#*findBy'>findBy</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
<li class='toc2'><a href='#Undocumented class methods'>Undocumented class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*add'>add</a> </li>
<li class='toc3'><a href='#*all'>all</a> </li>
<li class='toc3'><a href='#*doesNotUnderstand'>doesNotUnderstand</a> </li>
<li class='toc3'><a href='#*fromID'>fromID</a> </li>
<li class='toc3'><a href='#*get'>get</a> </li>
<li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*schemes'>schemes</a> </li>
<li class='toc3'><a href='#*set'>set</a> </li>
<li class='toc3'><a href='#*use'>use</a> </li>
<li class='toc3'><a href='#*useID'>useID</a> </li>
<li class='toc3'><a href='#*verbose'>verbose</a> </li>
</ul></ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>GeneralHID is a cross platform wrapper for accessing HID devices. Currently the MacOSX and Linux HID support has been wrapped. Some of the code is inspired by the GUI wrapper.<div class='note'><span class='notelabel'>NOTE:</span> It is advised to use this class instead of the platform specific classes: <a href="./../Classes/HIDDeviceService.html">HIDDeviceService</a> (on MacOSX) and <a href="./../Classes/LID.html">LID</a> (on Linux).</div>
<p>There are intermediate "bridge" classes <a href="./../Classes/MXHID">MXHID</a> (on MacOSX) and <a href="./../Classes/GLID.html">GLID</a> (on Linux), which should not be used directly, but their names will show up in the output of some of the methods of GeneralHID.<h3><a class='anchor' name='Some outstanding issues'>Some outstanding issues</a></h3>

<p>This class is not completely finished yet. Common slot numbers across platforms are not yet guaranteed. On Windows there is not yet a proper implementation available, but you can use HID Server from <a href="http://ixi-software.net/content/backyard.html">http://ixi-software.net/content/backyard.html</a> , which comes with classes which are compatible with GeneralHID.<h3><a class='anchor' name='Further information'>Further information</a></h3>

<p>See <a href="./../Classes/GeneralHIDDevice.html">GeneralHIDDevice</a> for a documentation of the methods to access an HID device. See <a href="./../Classes/GeneralHIDSpec.html">GeneralHIDSpec</a> for a documentation of how to access slots by name, instead of numbers.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*scheme' href='./../Overviews/Methods.html#scheme'>scheme</a> </h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*current' href='./../Overviews/Methods.html#current'>current</a> </h3>
<div class='method'>
<p>Get the current scheme. With scheme.id and current.id one can get the current scheme ID.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*buildDeviceList' href='./../Overviews/Methods.html#buildDeviceList'>buildDeviceList</a>: METHOD NOT FOUND!</h3>
<div class='method'>
<p>Look for all connected devices and build a device list. This returns the devicelist as an <a href="./../Classes/Array.html">Array</a>.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*deviceList' href='./../Overviews/Methods.html#deviceList'>deviceList</a>: METHOD NOT FOUND!</h3>
<div class='method'>
<p>Returns the device list if it has already been built before.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*postDevices' href='./../Overviews/Methods.html#postDevices'>postDevices</a>: METHOD NOT FOUND!</h3>
<div class='method'>
<p>Posts a readable list of devices.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*postDevicesAndProperties' href='./../Overviews/Methods.html#postDevicesAndProperties'>postDevicesAndProperties</a>: METHOD NOT FOUND!</h3>
<div class='method'>
<p>Posts a readable list of devices and their properties.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*startEventLoop' href='./../Overviews/Methods.html#startEventLoop'>startEventLoop</a>: METHOD NOT FOUND!</h3>
<div class='method'>
<p>Start the eventloop with a update rate (or rather update time in seconds).<div class='note'><span class='notelabel'>NOTE:</span> this is only really needed on MacOSX, but for crossplatform code you should include it in your code.</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*stopEventLoop' href='./../Overviews/Methods.html#stopEventLoop'>stopEventLoop</a>: METHOD NOT FOUND!</h3>
<div class='method'>
<p>Stop the eventloop.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*eventLoopIsRunning' href='./../Overviews/Methods.html#eventLoopIsRunning'>eventLoopIsRunning</a>: METHOD NOT FOUND!</h3>
<div class='method'>
<p>Check status of eventloop.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*open' href='./../Overviews/Methods.html#open'>open</a> (<span class='argstr'>dev</span>)</h3>
<div class='method'>
<p>Opens the device; the device should be an item got from the device list.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*findBy' href='./../Overviews/Methods.html#findBy'>findBy</a> (<span class='argstr'>vendorID</span>, <span class='argstr'>productID</span>, <span class='argstr'>locID</span>, <span class='argstr'>versionID</span>)</h3>
<div class='method'>
<p>Find a device by its info properties.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>vendorID<td class='argumentdesc'>
<p>manufacturer<tr><td class='argumentname'>productID<td class='argumentdesc'>
<p>product identifier as given by manufacturer<tr><td class='argumentname'>locID<td class='argumentdesc'>
<p>identifier for the physical connection to your computer<tr><td class='argumentname'>versionID<td class='argumentdesc'>
<p>a version of the product, as given by the manufacturer</table></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h3><a class='anchor' name='Undocumented class methods'>Undocumented class methods</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*add' href='./../Overviews/Methods.html#add'>add</a> (<span class='argstr'>aScheme</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*all' href='./../Overviews/Methods.html#all'>all</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*all' href='./../Overviews/Methods.html#all'>all</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doesNotUnderstand' href='./../Overviews/Methods.html#doesNotUnderstand'>doesNotUnderstand</a> (<span class='argstr'>selector</span> <span class='argstr'>... args</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*fromID' href='./../Overviews/Methods.html#fromID'>fromID</a> (<span class='argstr'>id</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*get' href='./../Overviews/Methods.html#get'>get</a> (<span class='argstr'>id</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>key</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*schemes' href='./../Overviews/Methods.html#schemes'>schemes</a> </h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*set' href='./../Overviews/Methods.html#set'>set</a> (<span class='argstr'>aScheme</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*use' href='./../Overviews/Methods.html#use'>use</a> (<span class='argstr'>aScheme</span>, <span class='argstr'>func</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*useID' href='./../Overviews/Methods.html#useID'>useID</a> (<span class='argstr'>id</span>, <span class='argstr'>func</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*verbose' href='./../Overviews/Methods.html#verbose'>verbose</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*verbose' href='./../Overviews/Methods.html#verbose'>verbose</a> = value</h3>
<h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>// General structure to access a device
// Look for the devices that are attached:
GeneralHID.buildDeviceList;
// Get the list of devices:
d = GeneralHID.deviceList;
// Check which devices have been found:
GeneralHID.postDevices;
// Pick the 6th device and open it and create an instance of it:
a = GeneralHID.open( d[5] )
// Get info on the device:
a.info;
// if you want to automatically find the device when you restart you can use the GeneralHID.findBy method. To get the arguments you should use for this function, you can use:
a.info.findArgs;
// this outputs for my Impact gamepad:
[ 1973, 786, usb-0000:00:1d.0-1/input0, 272 ]
// close the device, as we will reopen it in the next lines
a.close;
// if we know which device we want, we can find it:
b = GeneralHID.findBy( 1973, 786, "usb-0000:00:1d.0-1/input0", 272 );
// if you do not care about the version or the location, you can also do:
b = GeneralHID.findBy( 1973, 786 );
// or if you do not even care about the productID
b = GeneralHID.findBy( 1973 );
// you can then open it by:
a = GeneralHID.open( b )
// Start eventloop:
GeneralHID.startEventLoop
// Get the capabilities of the device in a readable format:
a.caps;
// there are different types of slots:
// button (type 1), has only on/off (1/0) states
// relative (type 2), counts up or down (scrollwheel for example)
// absolute (type 3), continuous value between 0 and 1
// some other may show up on Linux ( Syn (type 0) and Miscellaneous (type 4), but these are generally not very useful).
// See if data is coming in:
a.debug_( true );
// Stop it:
a.debug_( false );
// Debugging can be turned on for each slot individually, if necessary:
//(IBM trackpoint)
a.slots[1].at( 272 ).debug_( true );
// (external mouse on macbook pro)
a.slots[3][1].debug_(true);
(external mouse on ibm thinkpad)
a.slots[2][1].debug_(true);
// Turn it off again: // (IBM trackpoint)
a.slots[1].at( 272 ).debug_( false );
//(external mouse on macbook pro)
a.slots[3][48].debug_(false);
//(external mouse on ibm thinkpad)
a.slots[3][1].debug_(false);

// You can also create a generic gui to see what is coming in:
a.makeGui;

// The current value of a slot can be checked:
a.slots[1].at( 272 ).value;
a.slots[2].at( 1 ).value;
a.slots[3][1].value
//If the slot is an LED, you can set the value:
a.slots[11][0].value = 1;
a.slots[11][0].value = 0;

// Actions can be mapped to each slot individually.
a.slots[1].at( 272 ).action_( { "hello".postln; } );
a.slots[1].at( 273 ).action_( { "hi".postln; } );
a.slots[3].at( 1 ).action_( { "hi".postln; } );
// with an input to the function
a.slots[3].at( 1 ).action_( { |v| "hi, my value is ".post; v.value.postln; } );
a.slots[1].at( 272 ).action_( { |v| "hi, my value is ".post; v.value.postln; } );

// To stop the action, assign it to an empty function.
a.slots[1].at( 272 ).action_( {} );
a.slots[1].at( 273 ).action_( {} );
a.slots[3].at( 1 ).action_( {} );

// you can access slots, by giving them a key:
a.add( \lx, [3,0] );
a[\lx].debug_( true );
// the last item in the output array, now shows the key
a[\lx].debug_( false );
// save the spec for future use:
a.spec.save( "Impact_help" );
// find a spec defined previously for this device:
c = a.findSpec;
// set it:
a.setSpec( c[0] );
// more info on this in the [GeneralHIDSpec] helpfile
// If the server is running you can create a control bus for the HID data to go to, so that a synth can immediately read the data:
s = Server.local.boot;
// To create the bus:
a.slots[1].at( 272 ).createBus( s ); a.slots[2].at( 8 ).createBus( s );

SynthDef( \hidbus_help, { |out=0,amp=0|
    Out.ar( out, SinOsc.ar( 300, 0, 0.01*amp.abs ) );
}).add;
)
x = Synth.new( \hidbus_help );
x.map( \amp, a.slots[2].at( 8 ).bus );
x.free;

( // a nicer version:
SynthDef( \hidbus_help, { |out=0,amp=0,amp2=0|
    Out.ar( out, SinOsc.ar( 300, 0, 0.01*amp.abs.lag( 0.1 ) * amp2.lag(0.01,0.99) ) );
}).add;
)
x = Synth.new( \hidbus_help );
x.map( \amp, a.slots[2].at( 8 ).bus );
x.map( \amp2, a.slots[1].at( 272 ).bus );
x.free;

( // an even nicer version:
SynthDef( \hidbus_help, { |out=0,freqadd=0,amp=0|
    Out.ar( out, SinOsc.ar( 300 + (freqadd.lag(0.2,1)*40), 0, 0.2*amp.lag(0.01,0.99) ) );
}).add;
)
x = Synth.new( \hidbus_help );
x.map( \freqadd, a.slots[2].at( 8 ).bus );
x.map( \amp, a.slots[1].at( 272 ).bus );
x.free;

// To free the bus:
a.slots[1].at( 272 ).freeBus;
a.slots[2].at( 8 ).freeBus;
// Close the device after use:
a.close;
GeneralHID.stopEventLoop</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/GeneralHID.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/GeneralHID.schelp</a><br>link::Classes/GeneralHID::<br>sc version: 3.7alpha0</div></div></body></html>