<html><head><title>FoaEncoderKernel</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES (extension)</div>
<div id='categories'><a href='./../Browse.html#Libraries>Ambisonic Toolkit>FOA>Encoding'>Libraries>Ambisonic Toolkit>FOA>Encoding</a></div>
<h1>FoaEncoderKernel</h1>
<div id='summary'>First Order Ambisonic (FOA) encoder kernels</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///usr/local/share/SuperCollider/Extensions/SC3plugins/ATK/Classes/ATKMatrix.sc'>/usr/local/share/SuperCollider/Extensions/SC3plugins/ATK/Classes/ATKMatrix.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/FoaEncoderMatrix.html">FoaEncoderMatrix</a>, <a href="./../Classes/FoaEncode.html">FoaEncode</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*newSuper'>newSuper</a> </li>
<li class='toc3'><a href='#*newUHJ'>newUHJ</a> </li>
<li class='toc3'><a href='#*newSpread'>newSpread</a> </li>
<li class='toc3'><a href='#*newDiffuse'>newDiffuse</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-set'>set</a> </li>
<li class='toc3'><a href='#-type'>type</a> </li>
<li class='toc3'><a href='#-op'>op</a> </li>
<li class='toc3'><a href='#-kind'>kind</a> </li>
<li class='toc3'><a href='#-subjectID'>subjectID</a> </li>
<li class='toc3'><a href='#-dim'>dim</a> </li>
<li class='toc3'><a href='#-numChannels'>numChannels</a> </li>
<li class='toc3'><a href='#-dirChannels'>dirChannels</a> </li>
<li class='toc3'><a href='#-kernel'>kernel</a> </li>
<li class='toc3'><a href='#-kernelSize'>kernelSize</a> </li>
<li class='toc3'><a href='#-free'>free</a> </li>
<li class='toc3'><a href='#-numInputs'>numInputs</a> </li>
<li class='toc3'><a href='#-dirInputs'>dirInputs</a> </li>
<li class='toc3'><a href='#-numOutputs'>numOutputs</a> </li>
<li class='toc3'><a href='#-dirOutputs'>dirOutputs</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Generates encoding kernels required by the Ambisonic Toolkit's first order encoder, <a href="./../Classes/FoaEncode.html">FoaEncode</a>.<div class='note'><span class='notelabel'>NOTE:</span> The ATK kernels are required for kernel encoding. Please see the instructions <a href="http://www.ambisonictoolkit.net/download/kernels/#ATK_Kernels">here</a> for installation.</div><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*newSuper' href='./../Overviews/Methods.html#newSuper'>newSuper</a> (<span class='argstr'>kernelSize</span>, <span class='argstr'>server</span>, <span class='argstr'>sampleRate</span>, <span class='argstr'>score</span>)</h3>
<div class='method'>
<p>Ambisonic Super Stereo encoder.<a class='footnote anchor' name='footnote_org_1' href='#footnote_1'><sup>1</sup></a> <h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>kernelSize<td class='argumentdesc'>
<p>256, 512, 1024, 2048, 4096, 8192<tr><td class='argumentname'>server<td class='argumentdesc'>
<p><a href="./../Classes/Server.html">Server</a> on which to load kernel.<tr><td class='argumentname'>sampleRate<td class='argumentdesc'>
<p>The sample rate defaults to <code class='code prettyprint lang-sc'>nil</code> and is usually supplied by the running server. In NRT, you can specify a sampleRate to avoid booting a server.<tr><td class='argumentname'>score<td class='argumentdesc'>
<p>Default is <code class='code prettyprint lang-sc'>nil</code> for most real time usages. When using NRT, you can supply a score (a <a href="./../Classes/Score.html">Score</a> or a <a href="./../Classes/CtkScore">CtkScore</a>) onto which the kernels will be added, which lets you bypass booting a server.</table><h4>Discussion:</h4>

<p>The Super Stereo encoding technique is the classic method for encoding stereophonic signals into B-format.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*newUHJ' href='./../Overviews/Methods.html#newUHJ'>newUHJ</a> (<span class='argstr'>kernelSize</span>, <span class='argstr'>server</span>, <span class='argstr'>sampleRate</span>, <span class='argstr'>score</span>)</h3>
<div class='method'>
<p>Ambisonic UHJ stereo encoder.<a class='footnote anchor' name='footnote_org_2' href='#footnote_2'><sup>2</sup></a> <h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>kernelSize<td class='argumentdesc'>
<p>256, 512, 1024, 2048, 4096, 8192<tr><td class='argumentname'>server<td class='argumentdesc'>
<p><a href="./../Classes/Server.html">Server</a> on which to load kernel.<tr><td class='argumentname'>sampleRate<td class='argumentdesc'>
<p>The sample rate defaults to <code class='code prettyprint lang-sc'>nil</code> and is usually supplied by the running server. In NRT, you can specify a sampleRate to avoid booting a server.<tr><td class='argumentname'>score<td class='argumentdesc'>
<p>Default is <code class='code prettyprint lang-sc'>nil</code> for most real time usages. When using NRT, you can supply a score (a <a href="./../Classes/Score.html">Score</a> or a <a href="./../Classes/CtkScore">CtkScore</a>) onto which the kernels will be added, which lets you bypass booting a server.</table><h4>Discussion:</h4>

<p>The UHJ encoder offers access to numerous published recordings<a class='footnote anchor' name='footnote_org_3' href='#footnote_3'><sup>3</sup></a>  for periphonic (2D) audition.<div class='note'><span class='notelabel'>NOTE:</span> For optimal performance, use a dual-band decoder ( <code class='code prettyprint lang-sc'>'dual'</code> ) for monitoring. See discussion <a href="./../Classes/FoaDecoderMatrix.html#decoder_k">here</a>.</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*newSpread' href='./../Overviews/Methods.html#newSpread'>newSpread</a> (<span class='argstr'>subjectID: 6</span>, <span class='argstr'>kernelSize: 2048</span>, <span class='argstr'>server</span>, <span class='argstr'>sampleRate</span>, <span class='argstr'>score</span>)</h3>
<div class='method'>
<p>Frequency spreading mono encoder.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>subjectID<td class='argumentdesc'>
<p>0 to 12. Specifies the number of bands per octave of the frequency spreader. 0 returns 1 band per octave, etc.<tr><td class='argumentname'>kernelSize<td class='argumentdesc'>
<p>512, 1024, 2048, 4096, 8192, 16384<tr><td class='argumentname'>server<td class='argumentdesc'>
<p><a href="./../Classes/Server.html">Server</a> on which to load kernel.<tr><td class='argumentname'>sampleRate<td class='argumentdesc'>
<p>The sample rate defaults to <code class='code prettyprint lang-sc'>nil</code> and is usually supplied by the running server. In NRT, you can specify a sampleRate to avoid booting a server.<tr><td class='argumentname'>score<td class='argumentdesc'>
<p>Default is <code class='code prettyprint lang-sc'>nil</code> for most real time usages. When using NRT, you can supply a score (a <a href="./../Classes/Score.html">Score</a> or a <a href="./../Classes/CtkScore">CtkScore</a>) onto which the kernels will be added, which lets you bypass booting a server.</table><h4>Discussion:</h4>

<p>The frequency spreading technique encodes a monophonic signal into B-format by smoothly rotating the signal across the soundfield sphere, by frequency.<div class='note'><span class='notelabel'>NOTE:</span> As the number of bands per octaves increases, more time domain artefacts are introduced. This is usually heard as smearing in time.</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*newDiffuse' href='./../Overviews/Methods.html#newDiffuse'>newDiffuse</a> (<span class='argstr'>subjectID: 3</span>, <span class='argstr'>kernelSize: 2048</span>, <span class='argstr'>server</span>, <span class='argstr'>sampleRate</span>, <span class='argstr'>score</span>)</h3>
<div class='method'>
<p>Frequency diffusion mono encoder.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>subjectID<td class='argumentdesc'>
<p>0 to 5. Specifies the amount of phase dispersion of the frequency diffuser. 0 is low, 5 is high.<tr><td class='argumentname'>kernelSize<td class='argumentdesc'>
<p>512, 1024, 2048, 4096, 8192, 16384<tr><td class='argumentname'>server<td class='argumentdesc'>
<p><a href="./../Classes/Server.html">Server</a> on which to load kernel.<tr><td class='argumentname'>sampleRate<td class='argumentdesc'>
<p>The sample rate defaults to <code class='code prettyprint lang-sc'>nil</code> and is usually supplied by the running server. In NRT, you can specify a sampleRate to avoid booting a server.<tr><td class='argumentname'>score<td class='argumentdesc'>
<p>Default is <code class='code prettyprint lang-sc'>nil</code> for most real time usages. When using NRT, you can supply a score (a <a href="./../Classes/Score.html">Score</a> or a <a href="./../Classes/CtkScore">CtkScore</a>) onto which the kernels will be added, which lets you bypass booting a server.</table><h4>Discussion:</h4>

<p>The frequency diffusion technique encodes a monophonic signal into B-format by randomising the phase of the signal across the soundfield sphere, by frequency.<div class='note'><span class='notelabel'>NOTE:</span> As the diffusion increases, more time domain artefacts are introduced. This is usually heard as smearing in time.</div></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-set' href='./../Overviews/Methods.html#set'>set</a> </h3>
<div class='method'>
<p>Describes both the <em>signal set</em> and the <em>tool set</em>, encompassing the Ambisonic order, as well as channel ordering and normalisation.
<p>Answers <code class='code prettyprint lang-sc'>'FOA'</code>, aka traditional B-format:<table>
<tr><td><strong>Ambisonic Order</strong><td><strong>Channel Ordering</strong><td><strong>Channel Normalisation</strong><tr><td>1st<td>Gerzon (aka Furse-Malham)<td>MaxN</table>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-type' href='./../Overviews/Methods.html#type'>type</a> </h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p><code class='code prettyprint lang-sc'>'encoder'</code></div></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-op' href='./../Overviews/Methods.html#op'>op</a> </h3>
<div class='method'>
<p>Answers <code class='code prettyprint lang-sc'>'kernel'</code>, i.e. the type of operation used to compute the resulting signals.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-kind' href='./../Overviews/Methods.html#kind'>kind</a> </h3>
<div class='method'>
<p>Answers the kind of encoder<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newUHJ

// inspect
~encoder.kind

// don't forget to free!!
~encoder.free</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-subjectID' href='./../Overviews/Methods.html#subjectID'>subjectID</a> </h3>
<div class='method'>
<p>Answers the <strong>subjectID</strong> of the decoder<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newUHJ

// inspect
~encoder.subjectID

// don't forget to free!!
~encoder.free</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-dim' href='./../Overviews/Methods.html#dim'>dim</a> </h3>
<div class='method'>
<p>Answers the number of decoder dimensions: 2D or 3D.<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newUHJ

// inspect
~encoder.dim

// don't forget to free!!
~encoder.free</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-numChannels' href='./../Overviews/Methods.html#numChannels'>numChannels</a> </h3>
<div class='method'>
<p>Answers the number of input channels.<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newUHJ

// inspect
~encoder.numChannels

// don't forget to free!!
~encoder.free</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-dirChannels' href='./../Overviews/Methods.html#dirChannels'>dirChannels</a> </h3>
<div class='method'>
<p>Answers the direction of input channels, with angles in radians.<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newSuper

// inspect
~encoder.dirChannels.raddeg

// don't forget to free!!
~encoder.free</pre>
<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newUHJ

// inspect
~encoder.dirChannels.raddeg

// don't forget to free!!
~encoder.free</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-kernel' href='./../Overviews/Methods.html#kernel'>kernel</a> </h3>
<div class='method'>
<p>Answers the encoder kernel.<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newUHJ

// inspect
~encoder.kernel

// don't forget to free!!
~encoder.free</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-kernelSize' href='./../Overviews/Methods.html#kernelSize'>kernelSize</a> </h3>
<div class='method'>
<p>Answers the <strong>kernelSize</strong>.<h4>Discussion:</h4>

<p>Use of <a href="./../Classes/FoaEncoderKernel.html">FoaEncoderKernel</a> introduces a delay to the encoded B-format signal.
<p>The total delay, in samples, can be calculated as <code class='code prettyprint lang-sc'>(kernelSize-1)/2 + kernelSize - blockSize</code>, where <a href="./../Classes/ServerOptions.html#-blockSize">blockSize</a> is the number of samples in one control period of the <a href="./../Classes/Server.html">Server</a> in use.<pre class='code prettyprint lang-sc'>// encoder - make sure you boot the server first!!
~encoder = FoaEncoderKernel.newUHJ

// inspect
~encoder.kernelSize

// calculate delay in samples
(~encoder.kernelSize-1)/2 + ~encoder.kernelSize - s.options.blockSize

// calculate delay in seconds
((~encoder.kernelSize-1)/2 + ~encoder.kernelSize - s.options.blockSize) / s.sampleRate

// don't forget to free!!
~encoder.free</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-free' href='./../Overviews/Methods.html#free'>free</a> </h3>
<div class='method'>
<p>Free the kernel.<h4>Discussion:</h4>

<p>Release the kernel buffer's memory on the server and return the bufferID back to the server's buffer number allocator for future reuse.<div class='warning'><span class='warninglabel'>WARNING:</span> Only free the kernel when the <a href="./../Classes/FoaEncode.html#*ar">FoaEncode: *ar</a> is no longer in use!</div></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-numInputs' href='./../Overviews/Methods.html#numInputs'>numInputs</a> </h3>
<div class='method'>
<p>A synonym for <a href="#-numChannels">-numChannels</a></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-dirInputs' href='./../Overviews/Methods.html#dirInputs'>dirInputs</a> </h3>
<div class='method'>
<p>A synonym for <a href="#-dirChannels">-dirChannels</a></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-numOutputs' href='./../Overviews/Methods.html#numOutputs'>numOutputs</a> </h3>
<div class='method'>
<p>Answers the number of outputs for the decoder. 3 for 2D and 4 for 3D.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-dirOutputs' href='./../Overviews/Methods.html#dirOutputs'>dirOutputs</a> </h3>
<div class='method'>
<p>A convenience method providing polymorphism with <a href="./../Classes/FoaDecoderKernel.html#-dirOutputs">FoaDecoderKernel: -dirOutputs</a>.<h4>Returns:</h4>
<div class='returnvalue'><ul>
<li>for 2D: <code class='code prettyprint lang-sc'>[ inf, inf, inf ]</code><li>for 3D: <code class='code prettyprint lang-sc'>[ inf, inf, inf , inf ]</code></ul>
</div></div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>

<p>Please see <a href="./../Classes/FoaEncode.html#Examples">FoaEncode: Examples</a>.<div class='footnotes'>
<a class='anchor' name='footnote_1'/><div class='footnote'>[<a href='#footnote_org_1'>1</a>] - See: <a href="https://en.wikipedia.org/wiki/Ambisonic_UHJ_format#Super_stereo">https://en.wikipedia.org/wiki/Ambisonic_UHJ_format#Super_stereo</a></div><a class='anchor' name='footnote_2'/><div class='footnote'>[<a href='#footnote_org_2'>2</a>] - See: <a href="http://en.wikipedia.org/wiki/Ambisonic_UHJ_format">http://en.wikipedia.org/wiki/Ambisonic_UHJ_format</a></div><a class='anchor' name='footnote_3'/><div class='footnote'>[<a href='#footnote_org_3'>3</a>] - Nimbus Records' primary output is in Ambisonic UHJ. See: <a href="http://en.wikipedia.org/wiki/Nimbus_Records">http://en.wikipedia.org/wiki/Nimbus_Records</a> And: <a href="http://www.wyastone.co.uk/index.php">http://www.wyastone.co.uk/index.php</a></div></div><div class='doclink'>helpfile source: <a href='file:///usr/local/share/SuperCollider/Extensions/SC3plugins/ATK/HelpSource/Classes/FoaEncoderKernel.schelp'>/usr/local/share/SuperCollider/Extensions/SC3plugins/ATK/HelpSource/Classes/FoaEncoderKernel.schelp</a><br>link::Classes/FoaEncoderKernel::<br>sc version: 3.8dev</div></div></body></html>