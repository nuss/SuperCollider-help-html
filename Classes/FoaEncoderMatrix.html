<!doctype html><html lang='en'><head><title>FoaEncoderMatrix | SuperCollider 3.12.1 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'FoaEncoderMatrix';
var scdoc_sc_version = '3.12.1';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>FoaEncoderMatrix:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*newOmni'>newOmni</a> </li>
<li class='toc3'><a href='#*newDirection'>newDirection</a> </li>
<li class='toc3'><a href='#*newStereo'>newStereo</a> </li>
<li class='toc3'><a href='#*newQuad'>newQuad</a> </li>
<li class='toc3'><a href='#*new5_0'>new5_0</a> </li>
<li class='toc3'><a href='#*new7_0'>new7_0</a> </li>
<li class='toc3'><a href='#*newPanto'>newPanto</a> </li>
<li class='toc3'><a href='#*newPeri'>newPeri</a> </li>
<li class='toc3'><a href='#*newDirections'>newDirections</a> </li>
<li class='toc3'><a href='#*newZoomH2'>newZoomH2</a> </li>
<li class='toc3'><a href='#*newZoomH2n'>newZoomH2n</a> </li>
<li class='toc3'><a href='#*newAtoB'>newAtoB</a> </li>
<li class='toc3'><a href='#*newHoa1'>newHoa1</a> </li>
<li class='toc3'><a href='#*newAmbix1'>newAmbix1</a> </li>
<li class='toc2'><a href='#Matrix%20&%20File'>Matrix &amp; File</a></li>
<ul class='toc'><li class='toc3'><a href='#*newFromMatrix'>newFromMatrix</a> </li>
<li class='toc3'><a href='#*newFromFile'>newFromFile</a> </li>
</ul><li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Information'>Information</a></li>
<ul class='toc'><li class='toc3'><a href='#-info'>info</a> </li>
<li class='toc3'><a href='#-order'>order</a> </li>
<li class='toc3'><a href='#-set'>set</a> </li>
<li class='toc3'><a href='#-type'>type</a> </li>
<li class='toc3'><a href='#-op'>op</a> </li>
<li class='toc3'><a href='#-kind'>kind</a> </li>
<li class='toc3'><a href='#-dim'>dim</a> </li>
<li class='toc3'><a href='#-numChannels'>numChannels</a> </li>
<li class='toc3'><a href='#-dirChannels'>dirChannels</a> </li>
<li class='toc3'><a href='#-directions'>directions</a> </li>
<li class='toc3'><a href='#-numInputs'>numInputs</a> </li>
<li class='toc3'><a href='#-dirInputs'>dirInputs</a> </li>
<li class='toc3'><a href='#-numOutputs'>numOutputs</a> </li>
<li class='toc3'><a href='#-dirOutputs'>dirOutputs</a> </li>
</ul><li class='toc2'><a href='#Matrix'>Matrix</a></li>
<ul class='toc'><li class='toc3'><a href='#-matrix'>matrix</a> </li>
<li class='toc3'><a href='#-asArray'>asArray</a> </li>
</ul><li class='toc2'><a href='#File%20handling'>File handling</a></li>
<ul class='toc'><li class='toc3'><a href='#-fileName'>fileName</a> </li>
<li class='toc3'><a href='#-filePath'>filePath</a> </li>
<li class='toc3'><a href='#-fileParse'>fileParse</a> </li>
<li class='toc3'><a href='#-writeToFile'>writeToFile</a> </li>
</ul><li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes (extension)</span>
 | <span id='categories'><a href='./../Browse.html#Libraries'>Libraries</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>Ambisonic Toolkit'>Ambisonic Toolkit</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>Ambisonic Toolkit>Matrix & Kernel'>Matrix & Kernel</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>Ambisonic Toolkit>Matrix & Kernel>FOA'>FOA</a></span>
</div><h1>FoaEncoderMatrix<span id='superclasses'> : <a href="../Classes/FoaMatrix.html">FoaMatrix</a> : <a href="../Classes/AtkMatrix.html">AtkMatrix</a> : <a href="../Classes/Object.html">Object</a></span>
<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>First Order Ambisonic (FOA) encoder matrices</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/atk-sc3/Classes/FoaMatrix.sc' title='/home/stefan/.local/share/SuperCollider/downloaded-quarks/atk-sc3/Classes/FoaMatrix.sc'>FoaMatrix.sc</a></div><div id='related'>See also: <a href="./../Classes/FoaEncoderKernel.html">FoaEncoderKernel</a>, <a href="./../Classes/FoaEncode.html">FoaEncode</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>Generates encoding matrices required by the Ambisonic Toolkit's first order encoder, <a href="./../Classes/FoaEncode.html">FoaEncode</a>.<div class='note'><span class='notelabel'>NOTE:</span> The ATK matrices are required for using some of the matrix encoders. Please see <a href="./../Classes/Atk.html#Installation%20of%20ATK%20dependencies">Atk: Installation of ATK dependencies</a> for instructions.</div><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newOmni' href='./../Overviews/Methods.html#newOmni'>newOmni</a></h3>
<div class='method'>
<p>Omnidirectional encoder (monophonic).<h4>Discussion:</h4>

<p>An omnidirectional soundfield can be regarded in two ways: a soundfield with an infinite number of planewaves arriving in all directions, or a soundfield with no directions. In a well aligned, dampend studio environment, this usually sounds "in the head", while in concert hall listening usually appears as omnipresent.
<p>To control the soundfield, <a href="./../Classes/FoaPush.html">FoaPush</a> and <a href="./../Classes/FoaFocus.html">FoaFocus</a> can be applied to either "push" or "focus" an omnidirectional soundfield into a planewave, giving the soundfield an angle of arrival.<a class='footnote anchor' name='footnote_org_1' href='#footnote_1'><sup>1</sup></a> </div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newDirection' href='./../Overviews/Methods.html#newDirection'>newDirection</a>(<span class='argstr'>theta: 0</span>, <span class='argstr'>phi: 0</span>)</h3>
<div class='method'>
<p>Planewave encoder (monophonic).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>theta<td class='argumentdesc'>
<p>Azimuth angle, in radians: pi to -pi<tr><td class='argumentname'>phi<td class='argumentdesc'>
<p>Elevation anglein radians: pi/2 to -pi/2</table><h4>Discussion:</h4>

<p>This is the classic Ambisonic encoding (panning) function. SuperCollider's inbuilt <a href="./../Classes/PanB.html">PanB</a> and the Ambisonic Toolkit's <a href="./../Classes/FoaPanB.html">FoaPanB</a> implement this encoder as a UGen, and provide dynamically changing <strong>theta</strong> and <strong>phi</strong> at the audio and control rates.</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newStereo' href='./../Overviews/Methods.html#newStereo'>newStereo</a>(<span class='argstr'>angle: 0</span>)</h3>
<div class='method'>
<p>Stereophonic encoder.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>angle<td class='argumentdesc'>
<p>Soundfield distortion angle, in radians: pi/2 to -pi/2</table><h4>Discussion:</h4>

<p>The stereophonic signal is encoded as two planewaves. When <strong>angle</strong> = 0, the left and right channels of the input signal arrive at <code>[90, -90]</code> degrees. <strong>angle</strong> = pi/4 distorts the arrivals to <code>[45, -45]</code> degrees. <strong>angle</strong> = pi/2, places both the left and right inputs at front centre, <code>[0, 0]</code> degrees. This behaviour matches that of the Ambisonic Toolkit's first order image warping UGens: <a href="./../Classes/FoaFocus.html">FoaFocus</a>, <a href="./../Classes/FoaZoom.html">FoaZoom</a>, <a href="./../Classes/FoaPush.html">FoaPush</a>, and <a href="./../Classes/FoaPress.html">FoaPress</a>.<div class='note'><span class='notelabel'>NOTE:</span> The authors also suggest reviewing the Super Stereo<a class='footnote anchor' name='footnote_org_2' href='#footnote_2'><sup>2</sup></a>  encoding technique, the classic method for encoding stereophonic signals into B-format: <a href="./../Classes/FoaEncoderKernel.html#*newSuper">FoaEncoderKernel: *newSuper</a></div></div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newQuad' href='./../Overviews/Methods.html#newQuad'>newQuad</a></h3>
<div class='method'>
<p>Quadraphonic encoder.<h4>Discussion:</h4>

<p>The quadraphonic signal is encoded as four planewaves arriving at <code>[ 45, 135, -135, -45 ]</code> degrees. This encoding is equivalent to placing infinitely distant loudspeakers around a soundfield microphone in an anechoic chamber.</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*new5_0' href='./../Overviews/Methods.html#new5_0'>new5_0</a></h3>
<div class='method'>
<p>5.0 encoder.<h4>Discussion:</h4>

<p>The 5.0 signal is encoded as five planewaves arriving at <code>[ 0, 30, 110, -110, -30 ]</code> degrees. This encoding is equivalent to placing infinitely distant loudspeakers around a soundfield microphone in an anechoic chamber.</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*new7_0' href='./../Overviews/Methods.html#new7_0'>new7_0</a></h3>
<div class='method'>
<p>7.0 encoder.<h4>Discussion:</h4>

<p>The 7.0 signal is encoded as seven planewaves arriving at <code>[ 0, 30, 90, 135, -135, -90, -30 ]</code> degrees. This encoding is equivalent to placing infinitely distant loudspeakers around a soundfield microphone in an anechoic chamber.</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newPanto' href='./../Overviews/Methods.html#newPanto'>newPanto</a>(<span class='argstr'>numChans: 4</span>, <span class='argstr'>orientation: 'flat'</span>)</h3>
<div class='method'>
<p>Pantophonic (2D) regular polygon encoder.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>numChans<td class='argumentdesc'>
<p>number of input channel feeds<tr><td class='argumentname'>orientation<td class='argumentdesc'>
<p><code>'flat'</code> or <code>'point'</code></table><h4>Discussion:</h4>

<p>Inputs are in anti-clockwise order. The position of the first input channel is either centre or left of centre. <a href="#-dirChannels">-dirChannels</a> may be used to query resulting input channel directions. This encoding is equivalent to placing infinitely distant loudspeakers around a soundfield microphone in an anechoic chamber.</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newPeri' href='./../Overviews/Methods.html#newPeri'>newPeri</a>(<span class='argstr'>numChanPairs: 4</span>, <span class='argstr'>elevation: 0.61547970867039</span>, <span class='argstr'>orientation: 'flat'</span>)</h3>
<div class='method'>
<p>Periphonic (3D) dual ring, regular cylindrical encoder.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>numChanPairs<td class='argumentdesc'>
<p>Number of channel pairs. (Half the total number of input channel feeds.)<tr><td class='argumentname'>elevation<td class='argumentdesc'>
<p>Elevation of the upper ring, measured from the origin. In radians.<tr><td class='argumentname'>orientation<td class='argumentdesc'>
<p><code>'flat'</code> or <code>'point'</code></table><h4>Discussion:</h4>

<p>Inputs are in anti-clockwise order, beginning with the top ring. The position of the first speaker is either centre or left of centre. <a href="#-dirChannels">-dirChannels</a> may be used to query resulting loudspeaker directions. This encoding is equivalent to placing infinitely distant loudspeakers around a soundfield microphone in an anechoic chamber.</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newDirections' href='./../Overviews/Methods.html#newDirections'>newDirections</a>(<span class='argstr'>directions</span>, <span class='argstr'>pattern</span>)</h3>
<div class='method'>
<p>Virtual loudspeaker or microphone encoder, suitable for varied periphonic and pantophonic arrays.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>directions<td class='argumentdesc'>
<p>An array of directions of the virtual loudspeakers or microphones. Specify in radians.
<p>Rank 1 arrays return pantophonic, while rank 2 arrays return periphonic. E.g.,<textarea class='editor'>// 2D:
~directions = [ theta0, theta1, ... thetaN ];</textarea>

<p><textarea class='editor'>// 3D:
~directions = [ [ theta0, phi0 ], [ theta1, phi1 ], ... [ thetaN, phiN ] ];</textarea>
<tr><td class='argumentname'>pattern<td class='argumentdesc'>
<p>Virtual microphone pattern, <code>nil</code>, or 0 to 1.<dl>
<dt><code>nil</code><dd><strong>directions</strong> specifies virtual loudspeaker positions<dt>0 to 1<dd><strong>directions</strong> specifies a microphone array with patterns:<table>
<tr><td><strong>pattern</strong><td><strong>microphone</strong><tr><td>0.0<td>Omni<tr><td>0.5<td>Cardioid<tr><td>(3-sqrt(3))/2<td>Super-cardioid<tr><td>0.75<td>Hyper-cardioid<tr><td>1.0<td>Bi-directional</table>

<p> If <strong>pattern</strong> is an <a href="./../Classes/Array.html">Array</a>, individual microphone patterns are specified.
<p> For equivalences to decoder <strong>k</strong>, please see <a href="./../Classes/FoaDecoderMatrix.html#decoder%20k">FoaDecoderMatrix: decoder k</a>.</dl>
</table><h4>Discussion:</h4>

<p><a href="#-newDirections">-newDirections</a> is the Ambisonic Toolkit's most versatile first order encoder. Arbitrary input loudspeaker and/or microphone arrays may be specified.<textarea class='editor'>// Periphonic (3D) encoder, a 1/2 dome of 13 loudspeakers
// [[0, 0], [45, 0], [90, 0], [135, 0], [-180, 0], [-135, 0], [-90, 0], [-45, 0],
//  [45, 35.3], [135, 35.3], [-135, 35.3], [-45, 35.3], [0, 90]]

~directions = [[0, 0], [45, 0], [90, 0], [135, 0], [-180, 0], [-135, 0], [-90, 0],
    [-45, 0], [45, 35.3], [135, 35.3], [-135, 35.3], [-45, 35.3], [0, 90]].degrad;
~encoder = FoaEncoderMatrix.newDirections(~directions);

// inspect
~encoder.dirChannels.raddeg;</textarea>
<textarea class='editor'>// Periphonic (2D) encoder, 3 cardioid microphones
// See: http://www.michaelgerzonphotos.org.uk/microphones-calrecs.html
// [60, -180, -60]

~directions = [60, -180, -60].degrad;
~pattern = 0.5;
~encoder = FoaEncoderMatrix.newDirections(~directions, ~pattern);

// inspect
~encoder.dirChannels.raddeg;</textarea>
<textarea class='editor'>// Periphonic (2D) encoder, 1 omni and 2 cardioid microphones
// [0, 45, -45]

~directions = [0, 45, -45].degrad;
~pattern = [0, 0.5, 0.5];
~encoder = FoaEncoderMatrix.newDirections(~directions, ~pattern);

// inspect
~encoder.dirChannels.raddeg;</textarea>
</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newZoomH2' href='./../Overviews/Methods.html#newZoomH2'>newZoomH2</a>(<span class='argstr'>angles</span>, <span class='argstr'>pattern: 0.5857</span>, <span class='argstr'>k: 1</span>)</h3>
<div class='method'>
<p><a href="http://www.zoom.co.jp/english/products/h2/">ZoomH2</a> (pantophonic) encoder.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>angles<td class='argumentdesc'>
<p>Angles for front left and back left microphones, in radians. (The corresponding right microphones are mirrored across the y-axis.) Defaults to <code>[pi/3, 3/4*pi]</code> .<div class='note'><span class='notelabel'>NOTE:</span> <a class='anchor' name='newzoomh2note'>&nbsp;</a> The encoder reverses the labels for front and back of the <a href="http://www.zoom.co.jp/english/products/h2/">ZoomH2</a>. This is done so that directions are are preserved from the point of view of a field recording operator. With the <a href="http://www.zoom.co.jp/english/products/h2/">ZoomH2</a>'s display facing the operator (for ease of monitoring), sounds arriving in front of the operator will be encoded in the front of the soundfield. See also <a href="#newzoomdiscussion">Discussion</a> below.</div><tr><td class='argumentname'>pattern<td class='argumentdesc'>
<p>Microphone pattern<a class='footnote anchor' name='footnote_org_3' href='#footnote_3'><sup>3</sup></a> , 0 to 1:<table>
<tr><td><strong>pattern</strong><td><strong>virtual microphone</strong><tr><td>0.0<td>Omni<tr><td>0.5<td>Cardioid<tr><td>(3-sqrt(3))/2<td>Super-cardioid<tr><td>0.75<td>Hyper-cardioid<tr><td>1.0<td>Bi-directional</table>
<tr><td class='argumentname'>k<td class='argumentdesc'>
<p>Post-encoding Y scalar.<div class='note'><span class='notelabel'>NOTE:</span> Please see further discussion of <strong>k</strong> <a href="#newzoomh2k">here</a></div></table><h4>Discussion:</h4>

<p><a class='anchor' name='newzoomdiscussion'>&nbsp;</a>A four channel recording made by the <a href="http://www.zoom.co.jp/english/products/h2/">ZoomH2</a> will be returned as two stereo .wav files named:<ul>
<li>SRxxxF.wav<li>SRxxxR.wav</ul>

<p>Presuming the <a href="http://www.zoom.co.jp/english/products/h2/">ZoomH2</a> is oriented as described <a href="#newzoomh2note">here</a>, the following illustrates correct input for the encoder:<textarea class='editor'>// ZoomH2 records two stereo .wav files:
//       SRxxxF.wav
//       SRxxxR.wav
// correct input for FoaEncoderMatrix.newZoomH2 is:

~in = [ SRxxxR[0], SRxxxR[1], SRxxxF[0], SRxxxF[1] ]</textarea>

<p><a class='anchor' name='newzoomh2k'>&nbsp;</a>The encoder includes a Y scalar, <strong>k</strong>, and an auditioned adjustment is usually necessary to improve the resulting image. As the <a href="http://www.zoom.co.jp/english/products/h2/">ZoomH2</a>'s polar patterns are not consistent across frequency, and the capsules are not coincident, imaging is not always consistent. Touching <strong>k</strong> can go some way towards remedy-ing this.<div class='note'><span class='notelabel'>NOTE:</span> <strong>k</strong> = 1.7378 is a value that has been found suitable for matching <a href="http://www.radio.uqam.ca/ambisonic/comparative_recording.html">Courville</a>'s <a href="http://www.zoom.co.jp/english/products/h2/">ZoomH2</a><a class='footnote anchor' name='footnote_org_4' href='#footnote_4'><sup>4</sup></a>  and Soundfield recordings.<a class='footnote anchor' name='footnote_org_5' href='#footnote_5'><sup>5</sup></a> </div></div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newZoomH2n' href='./../Overviews/Methods.html#newZoomH2n'>newZoomH2n</a></h3>
<div class='method'>
<p>A first order <a href="https://en.wikipedia.org/wiki/Ambisonic_data_exchange_formats">Ambisonic format exchange</a> encoder, for use with the <a href="https://www.zoom-na.com/products/field-video-recording/field-recording/zoom-h2n-handy-recorder">ZoomH2n</a>. Encodes from AmbiX to traditional B-format. A convenience alias to <a href="#*newHoa1">*newHoa1</a>.<h4>Discussion:</h4>

<p>Encoding means encoding from one Ambisonic channel componenent orderding and normalisation to that of traditional B-format. In this case, from AmbiX encoding scheme (<strong>ACN</strong> ordering, <strong>SN3D</strong> normalisation) to <strong>Gerzon</strong> (aka <strong>Furse-Malham</strong>) ordering, <strong>MaxN</strong> normalisation.<div class='note'><span class='notelabel'>NOTE:</span> Requires a device firmware update to <a href="https://www.zoom-na.com/products/field-video-recording/field-recording/zoom-h2n-handy-recorder#downloads">H2n System Version 2.00</a> or higher. Set the <a href="https://www.zoom-na.com/products/field-video-recording/field-recording/zoom-h2n-handy-recorder">ZoomH2n</a> to record in the <code>SPATIAL AUDIO</code> mode. Further details may be reviewed in the manual addendum <a href="https://www.zoom.co.jp/sites/default/files/products/downloads/pdfs/H2n_Ver2_OPmanual_E.pdf">found here</a>. You may also like to review the <a href="https://youtu.be/njep5CO3w3g">H2n: Spatial Audio Setup</a> video.<a class='footnote anchor' name='footnote_org_6' href='#footnote_6'><sup>6</sup></a> </div></div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newAtoB' href='./../Overviews/Methods.html#newAtoB'>newAtoB</a>(<span class='argstr'>orientation: 'flu'</span>, <span class='argstr'>weight: 'dec'</span>)</h3>
<div class='method'>
<p>A-format to B-format encoder. Encodes to a variety of tetrahedral orientations and W channel weights.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>orientation<td class='argumentdesc'>
<p>Orientation of the A-format tetrahedron.<table>
<tr><td><strong>orientation</strong><td><strong>angles</strong> ([theta, phi] in degrees)<tr><td><code>'flu'</code><td><code>[[45.0,  35.3], [-45.0, -35.3], [135.0, -35.3], [-135.0,  35.3]]</code><tr><td><code>'fld'</code><td><code>[[45.0, -35.3], [-45.0 , 35.3], [135.0,  35.3], [-135.0, -35.3]]</code><tr><td><code>'flr'</code><td><code>[[54.7,   0.0], [-54.7,   0.0], [180.0,  54.7], [ 180.0, -54.7]]</code><tr><td><code>'fud'</code><td><code>[[ 0.0,  54.7], [  0.0, -54.7], [125.7,   0.0], [-125.7,   0.0]]</code><tr><td><code>'fbd'</code><td><code>[[ 0.0,   0.0], [180.0, -70.5], [112.2,  28.1], [-112.2,  28.1]]</code><tr><td><code>'fbu'</code><td><code>[[ 0.0,   0.0], [180.0,  70.5], [112.2, -28.1], [-112.2, -28.1]]</code><tr><td><code>'flru'</code><td><code>[[67.8,  28.1], [-67.8,  28.1], [  0.0, -70.5], [ 180.0,   0.0]]</code><tr><td><code>'flrd'</code><td><code>[[67.8, -28.1], [-67.8, -28.1], [  0.0,  70.5], [ 180.0,   0.0]]</code></table>
<tr><td class='argumentname'>weight<td class='argumentdesc'>
<p>The W weight factor.
<p>For convenience, equivalent virtual microphone <strong>pattern</strong> and decoding <strong>k</strong> are also listed.<table>
<tr><td><strong>weight</strong><td><strong>kind</strong><td><strong>W scale</strong><td><strong>virtual microphone</strong><td><strong>pattern</strong><td><strong>decoding</strong><td><strong>k</strong><tr><td><code>'dec'</code><td>Decorrelated (on the sphere)<td>1/sqrt(3)<td>Hyper-cardioid<td>0.75<td>strict soundfield<td><code>'velocity'</code><tr><td><code>'can'</code><td>Canonical (B-format)<td>1/sqrt(2)<td><td>sqrt(6)/(1+sqrt(6))<td><td>sqrt(2/3)<tr><td><code>'uns'</code><td>Unscaled<td>1<td>Super-cardioid<td>(3-sqrt(3))/2<td>energy optimised<td><code>'energy'</code><tr><td><code>'car'</code><td>Cardioid<td>sqrt(3)<td>Cardioid<td>0.5<td>controlled opposites<td><code>'controlled'</code></table>
</table><h4>Discussion:</h4>

<p>The A-format encoder is often used in conjunction with the <a href="./../Classes/FoaDecoderMatrix.html#*newBtoA">FoaDecoderMatrix: *newBtoA</a> B-format decoder to form signal processing networks which preserve the spatial encoding as is described <a href="./../Classes/FoaDecoderMatrix.html#btoadiscuss">here</a>.
<p>On its own, <a href="#*newAtoB">*newAtoB</a> is often used to author immersive, periphonic (3D) decorrelated soundfields.</div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newHoa1' href='./../Overviews/Methods.html#newHoa1'>newHoa1</a>(<span class='argstr'>ordering: 'acn'</span>, <span class='argstr'>normalisation: 'n3d'</span>)</h3>
<div class='method'>
<p>A first order <a href="https://en.wikipedia.org/wiki/Ambisonic_data_exchange_formats">Ambisonic format exchange</a> encoder. Encodes a variety of formats to traditional B-format.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>ordering<td class='argumentdesc'>
<p>Input Ambisonic channel component ordering.<table>
<tr><td><strong>ordering</strong><td><strong>kind</strong><tr><td><code>'acn'</code><td>Ambisonic Channel Number (ACN)<tr><td><code>'sid'</code><td>Single Index Designation (SID)</table>
<tr><td class='argumentname'>normalisation<td class='argumentdesc'>
<p>Spherical harmonic normalisation method.<table>
<tr><td><strong>normalisation</strong><td><strong>kind</strong><tr><td><code>'n3d'</code><td>Orthonormal basis for 3D decomposition (N3D)<tr><td><code>'sn3d'</code><td>Semi-normalised basis for 3D decomposition (SN3D)</table>
</table><h4>Discussion:</h4>

<p>Encoding means encoding from one Ambisonic channel componenent orderding and normalisation to that of traditional B-format. In other words, from some standard scheme to <strong>Gerzon</strong> (aka <strong>Furse-Malham</strong>) ordering with <strong>MaxN</strong> normalisation.<div class='note'><span class='notelabel'>NOTE:</span> <code>Hoa1</code> in the method name <a href="#*newHoa1">*newHoa1</a> refers to Higher Order Ambisonic (HOA) encoding format, Ambisonic order = 1. The input signal should have four channels, with the given encoding format as specified in the arguments.</div></div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newAmbix1' href='./../Overviews/Methods.html#newAmbix1'>newAmbix1</a></h3>
<div class='method'>
<p>A first order <a href="https://en.wikipedia.org/wiki/Ambisonic_data_exchange_formats">Ambisonic format exchange</a> encoder. Encodes from AmbiX to traditional B-format. A convenience alias to <a href="#*newHoa1">*newHoa1</a>.<h4>Discussion:</h4>

<p>Encoding means encoding from one Ambisonic channel componenent orderding and normalisation to that of traditional B-format. In this case, from AmbiX encoding scheme (<strong>ACN</strong> ordering, <strong>SN3D</strong> normalisation) to <strong>Gerzon</strong> (aka <strong>Furse-Malham</strong>) ordering, <strong>MaxN</strong> normalisation.</div><h3><a class='anchor' name='Matrix%20&%20File'>Matrix &amp; File</a></h3>
<h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newFromMatrix' href='./../Overviews/Methods.html#newFromMatrix'>newFromMatrix</a>(<span class='argstr'>matrix</span>, <span class='argstr'>directions</span>)</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>Create an instance from a raw 2D <a href="./../Classes/Matrix.html">Matrix</a>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>matrix<td class='argumentdesc'>
<p>A <a href="./../Classes/Matrix.html">Matrix</a> in the form of<textarea class='editor'>Matrix.with([[row1],[row2],...[rowN]])</textarea>
<tr><td class='argumentname'>directions<td class='argumentdesc'>
<p>An array of directions. Specify in radians.
<p>Rank 1 arrays return pantophonic, while rank 2 arrays return periphonic. E.g.,<textarea class='editor'>// 2D:
~directions = [ theta0, theta1, ... thetaN ];</textarea>

<p><textarea class='editor'>// 3D:
~directions = [ [ theta0, phi0 ], [ theta1, phi1 ], ... [ thetaN, phiN ] ];</textarea>
</table></div><h3 class='method-code'><span class='method-prefix'>FoaEncoderMatrix.</span><a class='method-name' name='*newFromFile' href='./../Overviews/Methods.html#newFromFile'>newFromFile</a>(<span class='argstr'>filePathOrName</span>)</h3>
<div class='method'>
<p>Create an FoaEncoderMatrix by loading a matrix from a file.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>filePathOrName<td class='argumentdesc'>
<p>Can be a path relative to your <code>/extensions/matrices/FOA/encoders</code> folder:<textarea class='editor'>Atk.getMatrixExtensionSubPath(\FOA, \encoders).fullPath</textarea>

<p>Otherwise a full path to your matrix file.</table><h4>Discussion:</h4>

<p>See the <a href="./../Guides/Guide-to-ATK-Matrix-Files.html">Guide to ATK Matrix Files</a> for more information.</div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Information'>Information</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-info' href='./../Overviews/Methods.html#info'>info</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>A convenience method to post the properties of the matrix, including metadata if the matrix was loaded from a <code>.yml</code> file.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-order' href='./../Overviews/Methods.html#order'>order</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Ambisonic order.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-set' href='./../Overviews/Methods.html#set'>set</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>Describes both the <em>signal set</em> and the <em>tool set</em>, encompassing the Ambisonic order, as well as channel ordering and normalisation.
<p>Ambisonic Toolkit designation indicating Ambisonic order and encoding format. E.g., <code>\FOA</code>, <code>\HOA3</code>.
<p>Answers, <code>\FOA</code>, aka traditional B-format:<table>
<tr><td><strong>Ambisonic Order</strong><td><strong>Component Ordering</strong><td><strong>Component Normalisation</strong><tr><td>1st<td>Furse-Malham (FuMa)<td>Gerzon / Furse-Malham (MaxN)</table>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-type' href='./../Overviews/Methods.html#type'>type</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p><code>'encoder'</code></div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-op' href='./../Overviews/Methods.html#op'>op</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Answers <code>'matrix'</code>, i.e. the type of operation used to compute the resulting signals.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-kind' href='./../Overviews/Methods.html#kind'>kind</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Answers the kind of encoder.<h4>Discussion:</h4>
<textarea class='editor'>// encoder
~encoder = FoaEncoderMatrix.newQuad

// inspect
~encoder.kind</textarea>
<textarea class='editor'>// encoder
~encoder = FoaEncoderMatrix.newPeri

// inspect
~encoder.kind</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-dim' href='./../Overviews/Methods.html#dim'>dim</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>Answers the number of encoder dimensions: 2D or 3D.<h4>Discussion:</h4>
<textarea class='editor'>// encoder
~encoder = FoaEncoderMatrix.newQuad

// inspect
~encoder.dim</textarea>
<textarea class='editor'>// encoder
~encoder = FoaEncoderMatrix.newPeri

// inspect
~encoder.dim</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-numChannels' href='./../Overviews/Methods.html#numChannels'>numChannels</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>Answers the number of input channels (virtual loudspeakers or microphones).<h4>Discussion:</h4>
<textarea class='editor'>// encoder
~encoder = FoaEncoderMatrix.newQuad

// inspect
~encoder.numChannels</textarea>
<textarea class='editor'>// encoder (two rings of 6)
~encoder = FoaEncoderMatrix.newPeri(6)

// inspect
~encoder.numChannels</textarea>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-dirChannels' href='./../Overviews/Methods.html#dirChannels'>dirChannels</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-dirChannels' href='./../Overviews/Methods.html#dirChannels'>dirChannels</a> = value</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>Answers the direction of virtual loudspeaker or microphone feeds, with angles in radians.<h4>Returns:</h4>
<div class='returnvalue'>
<p>A rank 1 array for pantophonic, and rank 2 array for periphonic. E.g.,<textarea class='editor'>// 2D:
[ theta0, theta1, ... thetaN ]</textarea>

<p><textarea class='editor'>// 3D
[ [ theta0, phi0 ], [ theta1, phi1 ], ... [ thetaN, phiN ] ]</textarea>
<textarea class='editor'>// encoder
~encoder = FoaEncoderMatrix.newQuad

// inspect
~encoder.dirChannels.raddeg</textarea>
<textarea class='editor'>// encoder (two rings of 6)
~encoder = FoaEncoderMatrix.newPeri(6)

// inspect
~encoder.dirChannels.raddeg</textarea>
</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-directions' href='./../Overviews/Methods.html#directions'>directions</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>A synonym for <a href="#-dirChannels">-dirChannels</a></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-numInputs' href='./../Overviews/Methods.html#numInputs'>numInputs</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>A synonym for <a href="#-numChannels">-numChannels</a></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-dirInputs' href='./../Overviews/Methods.html#dirInputs'>dirInputs</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>A synonym for <a href="#-dirChannels">-dirChannels</a></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-numOutputs' href='./../Overviews/Methods.html#numOutputs'>numOutputs</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Answers the number of outputs for the encoder. 3 for 2D and 4 for 3D.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-dirOutputs' href='./../Overviews/Methods.html#dirOutputs'>dirOutputs</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/FoaMatrix.html'>FoaMatrix</a></div>
<div class='method'>
<p>A convenience method providing polymorphism with <a href="./../Classes/FoaDecoderMatrix.html#-dirOutputs">FoaDecoderMatrix: -dirOutputs</a>.<h4>Returns:</h4>
<div class='returnvalue'><ul>
<li>for 2D: <code>[ inf, inf, inf ]</code><li>for 3D: <code>[ inf, inf, inf , inf ]</code></ul>
</div></div><h3><a class='anchor' name='Matrix'>Matrix</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-matrix' href='./../Overviews/Methods.html#matrix'>matrix</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Returns the raw coefficient Matrix.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-asArray' href='./../Overviews/Methods.html#asArray'>asArray</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Returns the matrix as a new <a href="./../Classes/Array.html">Array</a> of rows.</div><h3><a class='anchor' name='File%20handling'>File handling</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-fileName' href='./../Overviews/Methods.html#fileName'>fileName</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Answers the name of the file used to create the instance, or <code>nil</code> if not created by loading a matrix from a file.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-filePath' href='./../Overviews/Methods.html#filePath'>filePath</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Answers the path of the file used to create the instance, or <code>nil</code> if not created by loading a matrix from a file.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-fileParse' href='./../Overviews/Methods.html#fileParse'>fileParse</a></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>If the instance was created by loading a <code>.yml</code> file, this method returns the <a href="./../Classes/IdentityDictionary.html">IdentityDictionary</a> containing the parsed metadata. This can be useful if anything was stored in the metadata that can be subsequently used once reloaded, such as encoding directions, rotations, etc.<div class='note'><span class='notelabel'>NOTE:</span> For simply a quick glance at the metadata, it's recommended to use <a href="#-info">-info</a>.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-writeToFile' href='./../Overviews/Methods.html#writeToFile'>writeToFile</a>(<span class='argstr'>fileNameOrPath</span>, <span class='argstr'>note</span>, <span class='argstr'>attributeDictionary</span>, <span class='argstr'>overwrite: false</span>)</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/AtkMatrix.html'>AtkMatrix</a></div>
<div class='method'>
<p>Write the matrix to a file<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>fileNameOrPath<td class='argumentdesc'>
<p>A String of the file name. The file extension determines the format:<ul>
<li><code>.yml</code> allows for additional user-specified metadata (recommended).<li><code>.txt</code> writes the matrix coefficients only, in rows.<li><code>.mosl.txt</code> creates basic matrix files compatible with the <a href="http://www.ambisonictoolkit.net/download/reaper/">ATK for Reaper</a>, a set of <a href="http://www.reaper.fm/sdk/js/js.php">JSFX plugins</a> for the <a href="http://www.reaper.fm/">Reaper</a> DAW.</ul>

<p>You may provide a full path if you would like to save the file somewhere other than the default location in the Atk <code>extensions</code> folder. See the Discussion below for more information.<tr><td class='argumentname'>note<td class='argumentdesc'>
<p>A String that is a short description or bit of info about the matrix to store for future reference.<tr><td class='argumentname'>attributeDictionary<td class='argumentdesc'>
<p>A Dictionary containing any information that's useful to store in key:value pairs. Keys that match getters in the AtkMatrix will take precedence over the defaults. See the Discussion for more details.<tr><td class='argumentname'>overwrite<td class='argumentdesc'>
<p>A boolean specifying whether you'd like to force overwriting an existing file of the same name and extension.</table><h4>Discussion:</h4>

<p>The <a href="./../Guides/Guide-to-ATK-Matrix-Files.html">Guide to ATK Matrix Files</a> offers examples and more discussion regarding writing and reading matrices and metadata, including how to generate matrices for use in Reaper.</div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>

<p><a href="./../Guides/Encoding-FOA.html">Encoding FOA</a><div class='footnotes'>
<a class='anchor' name='footnote_1'/><div class='footnote'>[<a href='#footnote_org_1'>1</a>] - In combination with distance scaling, <a href="#*newOmni">*newOmni</a> and <a href="./../Classes/FoaPush.html">FoaPush</a> can be used to implement Menzies' "W-panning" technique. See: D. Menzies, "W-panning and O-format, tools for object spatialization," in Proceedings of the Audio Engineering Society 22nd International Conference on Virtual, Synthetic and Entertainment Audio, Espoo, Finland, 2002.</div><a class='anchor' name='footnote_2'/><div class='footnote'>[<a href='#footnote_org_2'>2</a>] - See <a href="https://en.wikipedia.org/wiki/Ambisonic_UHJ_format#Super_stereo">https://en.wikipedia.org/wiki/Ambisonic_UHJ_format#Super_stereo</a> for further information.</div><a class='anchor' name='footnote_3'/><div class='footnote'>[<a href='#footnote_org_3'>3</a>] - The default value, 0.5857, is derived from measurements made by Farina, and is a hyper-cardioid response with a zero at 135 degrees. See: <a href="http://pcfarina.eng.unipr.it/Public/Brahma/Zoom-H2/Polar-ZoomH2.xls">http://pcfarina.eng.unipr.it/Public/Brahma/Zoom-H2/Polar-ZoomH2.xls</a></div><a class='anchor' name='footnote_4'/><div class='footnote'>[<a href='#footnote_org_4'>4</a>] - Courville orients his ZoomH2 so that the labelled front of the device faces the front of the sound scene. This is front/back reversed as regards -newZoomH2. If you choose to encode Courville's example files, you'll need to follow with FoaMirrorX.</div><a class='anchor' name='footnote_5'/><div class='footnote'>[<a href='#footnote_org_5'>5</a>] - See: <a href="http://www.radio.uqam.ca/ambisonic/comparative_recording.html">http://www.radio.uqam.ca/ambisonic/comparative_recording.html</a></div><a class='anchor' name='footnote_6'/><div class='footnote'>[<a href='#footnote_org_6'>6</a>] - These last two links are best opened in a browser window:<textarea class='editor'>[
    "https://www.zoom.co.jp/sites/default/files/products/downloads/pdfs/H2n_Ver2_OPmanual_E.pdf",
    "https://youtu.be/njep5CO3w3g"
].do({arg item; item.openOS})</textarea>
</div></div><div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/atk-sc3/HelpSource/Classes/FoaEncoderMatrix.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/atk-sc3/HelpSource/Classes/FoaEncoderMatrix.schelp</a><br>link::Classes/FoaEncoderMatrix::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>