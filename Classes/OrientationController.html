<html><head><title>OrientationController</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES (extension)</div>
<div id='categories'><a href='./../Browse.html#Libraries>3Dj'>Libraries>3Dj</a></div>
<h1>OrientationController</h1>
<div id='summary'>A class for managing interaction with an orientation sensing device</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /home/stefan/.local/share/SuperCollider/downloaded-quarks/3Dj/classes/Interaction/<a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/3Dj/classes/Interaction/OrientationController.sc'>OrientationController.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Guides/3Dj.html">Introducing 3Dj</a>, <a href="./../Classes/SSWorld.html">SSWorld</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'><li class='toc2'><a href='#Message format'>Message format</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Sensing'>Sensing</a></li>
<ul class='toc'><li class='toc3'><a href='#-acceleration'>acceleration</a> </li>
<li class='toc3'><a href='#-gravity'>gravity</a> </li>
<li class='toc3'><a href='#-azimuth'>azimuth</a> </li>
<li class='toc3'><a href='#-elevation'>elevation</a> </li>
<li class='toc3'><a href='#-roll'>roll</a> </li>
<li class='toc3'><a href='#-setAction'>setAction</a> </li>
<li class='toc3'><a href='#-enableOscListeners'>enableOscListeners</a> </li>
<li class='toc3'><a href='#-disableOscListeners'>disableOscListeners</a> </li>
</ul><li class='toc2'><a href='#Log control'>Log control</a></li>
<ul class='toc'><li class='toc3'><a href='#-log'>log</a> </li>
<li class='toc3'><a href='#-logging'>logging</a> </li>
</ul><li class='toc2'><a href='#Playback control'>Playback control</a></li>
<ul class='toc'><li class='toc3'><a href='#-replay'>replay</a> </li>
<li class='toc3'><a href='#-pause'>pause</a> </li>
<li class='toc3'><a href='#-resume'>resume</a> </li>
<li class='toc3'><a href='#-stop'>stop</a> </li>
<li class='toc3'><a href='#-isPlaying'>isPlaying</a> </li>
</ul><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>This class provides a convenience method for easy access to the events generated by an orientation sensing device, for instance a smartphone.
<p>Devices communicate via OSC, and for the moment they should be connected to the same subnet.
<p>Logger/playback (aka looper) functionality is also available.<div class='note'><span class='notelabel'>NOTE:</span> In order to avoid reference system problems, the 0ยบ azimuth is taken as the first azimuth angle received</div><h3><a class='anchor' name='Message format'>Message format</a></h3>

<p>Any application compilant with the message format is able to communicate with the orientation controller.
<p>The three messages are:<pre class='code prettyprint lang-sc'>[/orientationController/orientation, azimuth, elevation, roll] // in degrees
[/orientationController/acceleration, x, y, z] 
[/orientationController/gravity, x, y, z]</pre>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> </h3>
<div class='method'></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Sensing'>Sensing</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-acceleration' href='./../Overviews/Methods.html#acceleration'>acceleration</a> </h3>
<div class='method'>
<p>Get the current sensed acceleration</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-gravity' href='./../Overviews/Methods.html#gravity'>gravity</a> </h3>
<div class='method'>
<p>Get the current sensed gravity</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-azimuth' href='./../Overviews/Methods.html#azimuth'>azimuth</a> </h3>
<div class='method'>
<p>Get the current azimuth (yaw) value<div class='note'><span class='notelabel'>NOTE:</span> Reference azimuth (=0) is considered as the first received azimuth value</div></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-elevation' href='./../Overviews/Methods.html#elevation'>elevation</a> </h3>
<div class='method'>
<p>Get the current elevation (pitch) value</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-roll' href='./../Overviews/Methods.html#roll'>roll</a> </h3>
<div class='method'>
<p>Get current roll value</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-setAction' href='./../Overviews/Methods.html#setAction'>setAction</a> (<span class='argstr'>key</span>, <span class='argstr'>aFunc</span>)</h3>
<div class='method'>
<p>Set an action to be performed when a new sensor value is received<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>key<td class='argumentdesc'>
<p>a <code class='code prettyprint lang-sc'>Symbol</code> representing the kind of data. Possible values:<ul>
<li><code class='code prettyprint lang-sc'>\orientation</code><li><code class='code prettyprint lang-sc'>\gravity</code><li><code class='code prettyprint lang-sc'>\acceleration</code></ul>
<tr><td class='argumentname'>aFunc<td class='argumentdesc'>
<p>the Function to be performed. Two arguments will be passed to the function:<ul>
<li><code class='code prettyprint lang-sc'>args</code> : For gravity and acceleration sensors, an Array with the sensed acceleration [x,y,z]. For orientation sensor, an Array in the form [azimuth,elevation,roll].<li><code class='code prettyprint lang-sc'>time</code> : Timestamp of the received message</ul>
</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-enableOscListeners' href='./../Overviews/Methods.html#enableOscListeners'>enableOscListeners</a> </h3>
<div class='method'>
<p>Enable sensor listening</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-disableOscListeners' href='./../Overviews/Methods.html#disableOscListeners'>disableOscListeners</a> </h3>
<div class='method'>
<p>Disable sensor listening</div><h3><a class='anchor' name='Log control'>Log control</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-log' href='./../Overviews/Methods.html#log'>log</a><h3 class='imethodname'><span class='methprefix'>-</span><a name='-log' href='./../Overviews/Methods.html#log'>log</a> = <span class='argstr'>state</span></h3>
<div class='method'>
<p>Set whether to start or stop logging the sensor activity<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>state<td class='argumentdesc'>
<p>a Boolean</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-logging' href='./../Overviews/Methods.html#logging'>logging</a> </h3>
<div class='method'>
<p>Get if <code class='code prettyprint lang-sc'>this</code> is currently logging data</div><h3><a class='anchor' name='Playback control'>Playback control</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-replay' href='./../Overviews/Methods.html#replay'>replay</a> (<span class='argstr'>repeat: inf</span>)</h3>
<div class='method'>
<p>If currently there is no playback, start it<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>repeat<td class='argumentdesc'>
<p>number of repetitions</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-pause' href='./../Overviews/Methods.html#pause'>pause</a> </h3>
<div class='method'>
<p>Pause the playback</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-resume' href='./../Overviews/Methods.html#resume'>resume</a> </h3>
<div class='method'>
<p>Resume the playback from where it was paused</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-stop' href='./../Overviews/Methods.html#stop'>stop</a> </h3>
<div class='method'>
<p>Stop playback</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-isPlaying' href='./../Overviews/Methods.html#isPlaying'>isPlaying</a> </h3>
<div class='method'>
<p>Answers whether the class is playing back</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>(
// create a simple sound scene with 1 object
w=SSWorld.new.showView;
o=SSObject(w,loc:[3,0,0]);

// setup the Orientation Controller
c=OrientationController.new;
c.setAction(\orientation,{|args,time|
    var azi = args[0];
    var ele = args[1];
    
    o.locSph_(azi:azi);
    o.locSph_(ele:ele);
});

// localhost
n = NetAddr.new( "localhost", NetAddr.langPort );

// let's simulate we have a sensing controller
t=Task({
    var azi=0;
    var ele=0;
    30.do{ |i|
        azi = azi + (0.5*i);
        ele = ele + (5.rand2);
        n.sendMsg( "/orientationController/orientation", azi, ele, 0);
        [azi,ele].postln;
        0.1.wait;
    }
});

)

// perform motion
t.start

// let's start to log..
c.log_(true)
// ..and perform the motion
t.start

// when finished, stop logging
c.log_(false)

// now we recorded the incoming messages. let's play them back:
c.replay
c.pause
c.resume

// also selective replay
c.pause
c.replay(3) // three times</pre>

<p><div class='doclink'>source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/3Dj/HelpSource/Classes/OrientationController.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/3Dj/HelpSource/Classes/OrientationController.schelp</a><br>link::Classes/OrientationController::<br>sc version: 3.7alpha1</div></div></body></html>