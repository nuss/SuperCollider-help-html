<!doctype html><html lang='en'><head><title>Updater | SuperCollider 3.9dev Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script>
var helpRoot = './..';
var scdoc_title = 'Updater';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>SuperCollider 3.9dev Classes (extension)</span>
 | <span id='categories'><a href='./../Browse.html#Libraries'>Libraries</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>crucial'>crucial</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>crucial>GUI'>GUI</a></span>
</div><h1>Updater<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>simple MVC utility; calls an update handler when the model changes</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/Gui/Updater.sc'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/Gui/Updater.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/ObjectGui.html">ObjectGui</a>, <a href="./../Classes/SimpleController.html">SimpleController</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-model'>model</a> </li>
<li class='toc3'><a href='#-updateFunc'>updateFunc</a> </li>
<li class='toc3'><a href='#-init'>init</a> </li>
<li class='toc3'><a href='#-update'>update</a> </li>
<li class='toc3'><a href='#-remove'>remove</a> </li>
<li class='toc3'><a href='#-removeOnClose'>removeOnClose</a> </li>
<li class='toc3'><a href='#-findWindow'>findWindow</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>A simple utility object that adds itself as a dependant on a model and calls the handler whenever the model is changed.
<p>An Updater can be used to implement a simple Model-View-Controller architecture in situations where a full blown controller class is not needed.
<p>It adds itself as a dependant to the model. When the model is issued a .changed message (after its state has been changed in some way) all of its dependants, including the Updater are sent the .update message. The Updater class then simply evalutes the updateFunction
<p>Note: SimpleController isn't really a full controller. Its the exact same thing as this (and was written after Updater). A controller mediates in both directions between view and model, and these classes are simple updaters that just update views. ObjectGui is more of a proper controller in that it knows the model and the view(s) and mediates between them.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>model</span>, <span class='argstr'>updateFunc</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>model<td class='argumentdesc'><tr><td class='argumentname'>updateFunc<td class='argumentdesc'></table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-model' href='./../Overviews/Methods.html#model'>model</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-model' href='./../Overviews/Methods.html#model'>model</a> = value</h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-updateFunc' href='./../Overviews/Methods.html#updateFunc'>updateFunc</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-updateFunc' href='./../Overviews/Methods.html#updateFunc'>updateFunc</a> = value</h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-init' href='./../Overviews/Methods.html#init'>init</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-update' href='./../Overviews/Methods.html#update'>update</a> ( <span class='argstr'>... args</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>... args<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-remove' href='./../Overviews/Methods.html#remove'>remove</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-removeOnClose' href='./../Overviews/Methods.html#removeOnClose'>removeOnClose</a> (<span class='argstr'>layout</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>layout<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-findWindow' href='./../Overviews/Methods.html#findWindow'>findWindow</a> (<span class='argstr'>layout</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>layout<td class='argumentdesc'></table></div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>(
Sheet({ arg layout;

    var bpmView, updater;

    bpmView= CXLabel(layout, "tempo:_____");

    updater = Updater(Tempo.default,{ // any change to Tempo
            bpmView.label_("tempo:" + Tempo.bpm).refresh;
        });

    // fire the function manually to initially set the bpmView label
    updater.update;

    // tell the layout to .remove this updater when the layout and windows close
    layout.removeOnClose( updater );
});

// every time you set the Tempo it will issue itself a .changed message
Tempo.tempo = 0.4

Tempo.tempo = 1.3

Tempo.tempo = 1.0

)</pre>

<p>The updater adds itself as a dependant to the model, so its important to at some point tell the updater to remove itself (as a dependant). Otherwise it will stay in the model's dependant dictionary and will not get garbage collected. It will also continue to respond to update messages. If the window has closed this means it will try to change views that no longer exist and you will get errors.
<p> tell the layout to .remove this updater when the layout and windows close :<pre class='code prettyprint lang-sc'>    layout.removeOnClose( updater );</pre>

<p>Update the client of messages from server
<p>The commonly used NodeWatcher class watches server notifications and issues .changed messages to the Node objects. Updater can be used to fire an updateFunction
<p>model - the node which you want to receive server notifications for. updateFunction -<pre class='code prettyprint lang-sc'>(
// prep
s = Server.local;

n = SynthDef("Updater-help", {|out, freq|
            var sin;
            sin = SinOsc.ar(freq, 0.5)*EnvGen.kr(Env.triangle(4,1), doneAction:2);
            Out.ar(out, sin);
        }).send(s);
)

(
//create a new synth node on the server
n = Synth.new("Updater-help", [\out, 0, \freq, 220]);

//you need to register the synth with a NodeWatcher first
NodeWatcher.register(n);

//update the client of \n_end messages
Updater(n, {|node, msg|
        if(msg==\n_end, {
            "synth has ended".postln;
        });
    });
)</pre>

<p>This could also be done using SimpleController, a related class that assumes that the second argument will be a symbol.<pre class='code prettyprint lang-sc'>(
//create a new synth node on the server
n = Synth.new("Updater-help", [\out, 0, \freq, 220]);

//you need to register the synth with a NodeWatcher first
NodeWatcher.register(n);
c = SimpleController(n);

// map \n_end to an updateFunction
c.put( \n_end,{ arg node;
    "synth has ended".postln;
});

)</pre>
<div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/HelpSource/Classes/Updater.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/HelpSource/Classes/Updater.schelp</a><br>link::Classes/Updater::<br></div></div></body></html>