<html><head><title>PlayerSocket</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES (extension)</div>
<div id='categories'><a href='./../Browse.html#Libraries'>Libraries</a>><a href='./../Browse.html#Libraries>crucial'>crucial</a>><a href='./../Browse.html#Libraries>crucial>Players'>Players</a></div>
<h1>PlayerSocket<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>a player that can play other players using a cross-faded and fuse-protected socket</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/Players/PlayerSocket.sc'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/Players/PlayerSocket.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/AbstractPlayerProxy.html">AbstractPlayerProxy</a> : <a href="../Classes/AbstractPlayer.html">AbstractPlayer</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></div>
<div id='subclasses'>Subclasses: <a href="../Classes/PlayerEffectSocket.html">PlayerEffectSocket</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*prNew'>prNew</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-round'>round</a> </li>
<li class='toc3'><a href='#-rate'>rate</a> </li>
<li class='toc3'><a href='#-numChannels'>numChannels</a> </li>
<li class='toc3'><a href='#-env'>env</a> </li>
<li class='toc3'><a href='#-socketGroup'>socketGroup</a> </li>
<li class='toc3'><a href='#-lastPlayer'>lastPlayer</a> </li>
<li class='toc3'><a href='#-envdSource'>envdSource</a> </li>
<li class='toc3'><a href='#-fuseBlown'>fuseBlown</a> </li>
<li class='toc3'><a href='#-psinit'>psinit</a> </li>
<li class='toc3'><a href='#-prepareAndSpawn'>prepareAndSpawn</a> </li>
<li class='toc3'><a href='#-prepareAndQSpawn'>prepareAndQSpawn</a> </li>
<li class='toc3'><a href='#-preparePlayer'>preparePlayer</a> </li>
<li class='toc3'><a href='#-spawnPlayer'>spawnPlayer</a> </li>
<li class='toc3'><a href='#-qspawnPlayer'>qspawnPlayer</a> </li>
<li class='toc3'><a href='#-qrespawnPlayer'>qrespawnPlayer</a> </li>
<li class='toc3'><a href='#-releaseVoice'>releaseVoice</a> </li>
<li class='toc3'><a href='#-isSleeping'>isSleeping</a> </li>
<li class='toc3'><a href='#-qwake'>qwake</a> </li>
<li class='toc3'><a href='#-makeResourcesToBundle'>makeResourcesToBundle</a> </li>
<li class='toc3'><a href='#-freeResourcesToBundle'>freeResourcesToBundle</a> </li>
<li class='toc3'><a href='#-prepareChildrenToBundle'>prepareChildrenToBundle</a> </li>
<li class='toc3'><a href='#-freeToBundle'>freeToBundle</a> </li>
<li class='toc3'><a href='#-subGroups'>subGroups</a> </li>
<li class='toc3'><a href='#-loadDefFileToBundle'>loadDefFileToBundle</a> </li>
<li class='toc3'><a href='#-instrArgFromControl'>instrArgFromControl</a> </li>
<li class='toc3'><a href='#-spawnToBundle'>spawnToBundle</a> </li>
<li class='toc3'><a href='#-synthArg'>synthArg</a> </li>
<li class='toc3'><a href='#-setSource'>setSource</a> </li>
<li class='toc3'><a href='#-setSourceToBundle'>setSourceToBundle</a> </li>
<li class='toc3'><a href='#-didFree'>didFree</a> </li>
<li class='toc3'><a href='#-fuseDidBlow'>fuseDidBlow</a> </li>
<li class='toc3'><a href='#-socketFreeAll'>socketFreeAll</a> </li>
<li class='toc3'><a href='#-name'>name</a> </li>
<li class='toc3'><a href='#-limit'>limit</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>A voice that is able to host and switch between different players.
<p>Setting the socket to a new player will load from disk (if needed), prepareForPlay and spawn.
<p>Players are played using an EnvelopedPlayer so that when the socket releases the voice (to end it or to switch to the next incoming player being played in the socket) the outgoing player is released cleanly. The EnvelopedPlayer also protects against NaN, inf and de-normalized floats, so if anything blows up in the channel it will not propgate up the mixer chain.
<p>the default releaseTime is 0.0 which will stop immediately.<pre class='code prettyprint lang-sc'>(
q = Patch({ Saw.ar(40.midicps) * 0.05 });
r = Patch({ Saw.ar(52.midicps) * 0.05 });
p = PlayerSocket.new(\audio,1);
p.play;
)
// then get the socked to alternately spawn q and r
p.prepareAndQSpawn(q,0.1);
p.prepareAndQSpawn(r,0.1);
p.prepareAndQSpawn(q,0.1);
p.prepareAndQSpawn(r,0.1);


(
p.prepareAndSpawn(
    Patch({ arg freq=400,gate=1.0;
        Saw.ar(freq) * EnvGen.kr(Env.adsr(0.1,2.0,0.3,2.0),gate) * 0.1
    },[
        rrand(38,70).midicps,
        KrNumberEditor(1.0,\gate)
    ]),
    1.0
)
)
// the current player in the socket is set to :  p.source

p.releaseVoice(1.0);


//we are asleep now
p.isSleeping;

p.isPlaying;

p.free;

p.isSleeping;

p.isPlaying;

p.insp</pre>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>rate: 'audio'</span>, <span class='argstr'>numChannels: 2</span>, <span class='argstr'>round: 0</span>, <span class='argstr'>env</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>rate<td class='argumentdesc'>
<p>all players should be the same rate<tr><td class='argumentname'>numChannels<td class='argumentdesc'>
<p>all players should have the same numChannels.<tr><td class='argumentname'>round<td class='argumentdesc'>
<p>if calling qspawnPlayer this is the timing quantization setting<tr><td class='argumentname'>env<td class='argumentdesc'>
<p>the Envelope for the internal EnvelopedPlayer</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*prNew' href='./../Overviews/Methods.html#prNew'>prNew</a> (<span class='argstr'>rate: 'audio'</span>, <span class='argstr'>numChannels: 2</span>, <span class='argstr'>round: 0</span>, <span class='argstr'>env</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>rate<td class='argumentdesc'><tr><td class='argumentname'>numChannels<td class='argumentdesc'><tr><td class='argumentname'>round<td class='argumentdesc'><tr><td class='argumentname'>env<td class='argumentdesc'></table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-round' href='./../Overviews/Methods.html#round'>round</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-round' href='./../Overviews/Methods.html#round'>round</a> = value</h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-rate' href='./../Overviews/Methods.html#rate'>rate</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-rate' href='./../Overviews/Methods.html#rate'>rate</a> = value</h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-numChannels' href='./../Overviews/Methods.html#numChannels'>numChannels</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-numChannels' href='./../Overviews/Methods.html#numChannels'>numChannels</a> = value</h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-env' href='./../Overviews/Methods.html#env'>env</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-env' href='./../Overviews/Methods.html#env'>env</a> = value</h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-socketGroup' href='./../Overviews/Methods.html#socketGroup'>socketGroup</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-lastPlayer' href='./../Overviews/Methods.html#lastPlayer'>lastPlayer</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-envdSource' href='./../Overviews/Methods.html#envdSource'>envdSource</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-fuseBlown' href='./../Overviews/Methods.html#fuseBlown'>fuseBlown</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-psinit' href='./../Overviews/Methods.html#psinit'>psinit</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-prepareAndSpawn' href='./../Overviews/Methods.html#prepareAndSpawn'>prepareAndSpawn</a> (<span class='argstr'>player</span>, <span class='argstr'>releaseTime</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>player<td class='argumentdesc'><tr><td class='argumentname'>releaseTime<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-prepareAndQSpawn' href='./../Overviews/Methods.html#prepareAndQSpawn'>prepareAndQSpawn</a> (<span class='argstr'>player</span>, <span class='argstr'>releaseTime</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>player<td class='argumentdesc'><tr><td class='argumentname'>releaseTime<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-preparePlayer' href='./../Overviews/Methods.html#preparePlayer'>preparePlayer</a> (<span class='argstr'>player</span>, <span class='argstr'>onComplete</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>player<td class='argumentdesc'><tr><td class='argumentname'>onComplete<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-spawnPlayer' href='./../Overviews/Methods.html#spawnPlayer'>spawnPlayer</a> (<span class='argstr'>player</span>, <span class='argstr'>releaseTime</span>, <span class='argstr'>beatDelta: 0</span>, <span class='argstr'>forceRespawn: false</span>)</h3>
<div class='method'>
<p>you should have already prepared the player<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>player<td class='argumentdesc'><tr><td class='argumentname'>releaseTime<td class='argumentdesc'><tr><td class='argumentname'>beatDelta<td class='argumentdesc'><tr><td class='argumentname'>forceRespawn<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-qspawnPlayer' href='./../Overviews/Methods.html#qspawnPlayer'>qspawnPlayer</a> (<span class='argstr'>player</span>, <span class='argstr'>releaseTime</span>)</h3>
<div class='method'>
<p>you should have already prepared the player<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>player<td class='argumentdesc'><tr><td class='argumentname'>releaseTime<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-qrespawnPlayer' href='./../Overviews/Methods.html#qrespawnPlayer'>qrespawnPlayer</a> (<span class='argstr'>releaseTime</span>)</h3>
<div class='method'>
<p>restart the currently playing player<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>releaseTime<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-releaseVoice' href='./../Overviews/Methods.html#releaseVoice'>releaseVoice</a> (<span class='argstr'>releaseTime</span>)</h3>
<div class='method'>
<p>release the currently playing player voice<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>releaseTime<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-isSleeping' href='./../Overviews/Methods.html#isSleeping'>isSleeping</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-qwake' href='./../Overviews/Methods.html#qwake'>qwake</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-makeResourcesToBundle' href='./../Overviews/Methods.html#makeResourcesToBundle'>makeResourcesToBundle</a> (<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-freeResourcesToBundle' href='./../Overviews/Methods.html#freeResourcesToBundle'>freeResourcesToBundle</a> (<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-prepareChildrenToBundle' href='./../Overviews/Methods.html#prepareChildrenToBundle'>prepareChildrenToBundle</a> (<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-freeToBundle' href='./../Overviews/Methods.html#freeToBundle'>freeToBundle</a> (<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-subGroups' href='./../Overviews/Methods.html#subGroups'>subGroups</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-loadDefFileToBundle' href='./../Overviews/Methods.html#loadDefFileToBundle'>loadDefFileToBundle</a> (<span class='argstr'>bundle</span>, <span class='argstr'>server</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'><tr><td class='argumentname'>server<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-instrArgFromControl' href='./../Overviews/Methods.html#instrArgFromControl'>instrArgFromControl</a> (<span class='argstr'>control</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>control<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-spawnToBundle' href='./../Overviews/Methods.html#spawnToBundle'>spawnToBundle</a> (<span class='argstr'>bundle</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>bundle<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-synthArg' href='./../Overviews/Methods.html#synthArg'>synthArg</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-setSource' href='./../Overviews/Methods.html#setSource'>setSource</a> (<span class='argstr'>s</span>, <span class='argstr'>atTime</span>, <span class='argstr'>releaseTime</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>s<td class='argumentdesc'><tr><td class='argumentname'>atTime<td class='argumentdesc'>
<p>see <a href="./../Guides/atTime.html">atTime</a><tr><td class='argumentname'>releaseTime<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-setSourceToBundle' href='./../Overviews/Methods.html#setSourceToBundle'>setSourceToBundle</a> (<span class='argstr'>s</span>, <span class='argstr'>bundle</span>, <span class='argstr'>releaseTime</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>s<td class='argumentdesc'><tr><td class='argumentname'>bundle<td class='argumentdesc'><tr><td class='argumentname'>releaseTime<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-didFree' href='./../Overviews/Methods.html#didFree'>didFree</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-fuseDidBlow' href='./../Overviews/Methods.html#fuseDidBlow'>fuseDidBlow</a> (<span class='argstr'>value</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>value<td class='argumentdesc'></table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-socketFreeAll' href='./../Overviews/Methods.html#socketFreeAll'>socketFreeAll</a> </h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-name' href='./../Overviews/Methods.html#name'>name</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-name' href='./../Overviews/Methods.html#name'>name</a> = value</h3>
<div class='method'></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-limit' href='./../Overviews/Methods.html#limit'>limit</a> = <span class='argstr'>boo</span></h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>boo<td class='argumentdesc'></table></div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>

<p>Testing short time intervals<pre class='code prettyprint lang-sc'>(
q = Patch({ Saw.ar(600) * 0.2 });
r = Patch({ Saw.ar(800) * 0.2 });
p = PlayerSocket.new(\audio,1);
p.play;

Routine({
    2.0.wait;
    32.do({
        rrand(0.01,0.2).wait;
        p.prepareAndSpawn([r,q].choose,rrand(0.01,1.0));
    });
    2.0.wait;
    p.release;
    4.0.wait;
    p.stop;
    1.0.wait;
    p.free;
}).play(AppClock)
)</pre>

<p>As an input to a Patch<pre class='code prettyprint lang-sc'>(
q = Patch({ Saw.ar * 0.2 });
r = Patch({ Saw.ar(800) * 0.2 });
p = PlayerSocket.new(numChannels: 1);
e = Patch({ arg audio; RLPF.ar(audio,200) },[ p ]);
e.play;
)


p.prepareAndSpawn(q);

p.prepareAndSpawn(r);

p.prepareAndSpawn(q);

p.prepareAndSpawn(r);

// if you know that you have prepared it
p.spawnPlayer(q);

q.readyForPlay

p.spawnPlayer(r);


p.releaseVoice

p.insp
e.insp
p.synthArg

e.free;</pre>
<div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/HelpSource/Classes/PlayerSocket.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/crucial-library/HelpSource/Classes/PlayerSocket.schelp</a><br>link::Classes/PlayerSocket::<br>sc version: 3.9dev</div></div></body></html>