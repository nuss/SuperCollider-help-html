<!doctype html><html lang='en'><head><title>PSrecur | SuperCollider 3.10.0 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'PSrecur';
var scdoc_sc_version = '3.10.0';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>PSrecur:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-recurFuncStream'>recurFuncStream</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented%20instance%20methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-embedInStream'>embedInStream</a> </li>
<li class='toc3'><a href='#-recurFunc'>recurFunc</a> </li>
<li class='toc3'><a href='#-start'>start</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes (extension)</span>
 | <span id='categories'><a href='./../Browse.html#Libraries'>Libraries</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>miSCellaneous'>miSCellaneous</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Libraries>miSCellaneous>PSx stream patterns'>PSx stream patterns</a> | <a href='./../Browse.html#Streams-Patterns-Events'>Streams-Patterns-Events</a>&#8201;&gt;&#8201;<a href='./../Browse.html#Streams-Patterns-Events>PSx stream patterns'>PSx stream patterns</a></span>
</div><h1>PSrecur<span id='superclasses'> : <a href="../Classes/PStream.html">PStream</a> : <a href="../Classes/Plazy.html">Plazy</a> : <a href="../Classes/Pattern.html">Pattern</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></span>
<div class='extension-indicator-ctr' title='This help file originates from a third-party quark or plugin for SuperCollider.'><img class='extension-indicator-icon' alt='Extension' src='./../images/plugin.png'><span class='extension-indicator-text'>Extension</span></div></h1>
<div id='summary'>Pattern to generate new values with a recursive Function</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/Classes/Patterns/PS.sc' title='/home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/Classes/Patterns/PS.sc'>PS.sc</a></div><div id='related'>See also: <a href="./../Overviews/miSCellaneous.html">miSCellaneous</a>, <a href="./../Tutorials/PSx_stream_patterns.html">PSx stream patterns</a>, <a href="./../Classes/MemoRoutine.html">MemoRoutine</a>, <a href="./../Classes/PS.html">PS</a>, <a href="./../Classes/PSdup.html">PSdup</a>, <a href="./../Classes/PSloop.html">PSloop</a></div>
</div>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>PSrecur.</span><a class='method-name' name='*new' href='./../Overviews/Methods.html#new'>new</a>(<span class='argstr'>recurFunc</span>, <span class='argstr'>length: inf</span>, <span class='argstr'>bufSize</span>, <span class='argstr'>start</span>, <span class='argstr'>copyItems: 0</span>, <span class='argstr'>copySets: 1</span>)</h3>
<div class='method'>
<p>Creates a new PSrecur object.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>recurFunc<td class='argumentdesc'>
<p>Recursive Function, the PSrecur will be passed as first arg, count as second arg.<tr><td class='argumentname'>length<td class='argumentdesc'>
<p>Number of output items, may be pattern or stream, defaults to inf.<tr><td class='argumentname'>bufSize<td class='argumentdesc'>
<p>Size of buffer to store last values. If <strong>bufSize</strong> is not defined and <strong>start</strong> is not given or a single item, <strong>bufSize</strong> gets value 1. If <strong>bufSize</strong> is not defined and <strong>start</strong> is an array <strong>bufSize</strong> gets its length.<tr><td class='argumentname'>start<td class='argumentdesc'>
<p>Single start item or array of items used for recursion.<tr><td class='argumentname'>copyItems<td class='argumentdesc'>
<p>Determines if and how to copy the last items generated by <strong>recurFunc</strong> which are either non-Sets or member of Sets. Takes Integer 0 (or false or Symbol \false), 1 (or true or Symbol \true) or 2 (or Symbol \deep). Other values are interpreted as 0. Defaults to 0.
<p>0: original item
<p>1: copy item
<p>2: deepCopy item<tr><td class='argumentname'>copySets<td class='argumentdesc'>
<p>Determines if and how to copy Sets generated by <strong>recurFunc</strong>. Takes Integer 0 (or false or Symbol \false), 1 (or true or Symbol \true). Other values are interpreted as 0. Defaults to 1.
<p>0: original Set
<p>1: copy Set<div class='note'><span class='notelabel'>NOTE:</span> The distinction of copying items and sets makes sense in the case of event streams. Per default Events are copied (<strong>copySets</strong> == 1), not their values (<strong>copyItems</strong> == 0). By playing Events those are used to store additional data (synth ids, msgFuncs â€¦) which is mostly not of interest when refering to the event stream, e.g. with PSx patterns which use MemoRoutine - copied Events will not contain this additional data. If values of Events or values returned directly by the stream (being no kind of Sets) are unstructured then copying makes no sense, this is the normal case, so copyItems defaults to 0. When going to alter the ouput, you might want to set <strong>copyItems</strong> to 1 for a PSx returning simple arrays or 2 for nested arrays (deepCopy). For deepCopying Events you'd have to set <strong>copySets</strong> to 1 and <strong>copyItems</strong> to 2 (an option <strong>copySets</strong> == 2 doesn't exist as it would be contradictory in combination with <strong>copyItems</strong> &lt; 2).</div><div class='note'><span class='notelabel'>NOTE:</span> Copy options concern copying into PSrecur's buffer as well as the output of a Stream derived from the PSrecur. When such a Stream is outputting copies this prevents unintended altering of items stored in the buffer of PSrecur. On the other hand storing copies in PSrecur's buffer prevents these from being altered unintendedly.</div></table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-recurFuncStream' href='./../Overviews/Methods.html#recurFuncStream'>recurFuncStream</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-recurFuncStream' href='./../Overviews/Methods.html#recurFuncStream'>recurFuncStream</a> = value</h3>
<div class='method'>
<p>Instance variable getter and setter methods.</div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented%20instance%20methods'>Undocumented instance methods</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-embedInStream' href='./../Overviews/Methods.html#embedInStream'>embedInStream</a>(<span class='argstr'>inval</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-recurFunc' href='./../Overviews/Methods.html#recurFunc'>recurFunc</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-recurFunc' href='./../Overviews/Methods.html#recurFunc'>recurFunc</a> = value</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-start' href='./../Overviews/Methods.html#start'>start</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-start' href='./../Overviews/Methods.html#start'>start</a> = value</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<textarea class='editor'>(
s = Server.local;
Server.default = s;
s.boot;
)

// another way to generate the fibonacci sequence
// the first arg passed to the Function is the PSrecur itself,
// x[0] refers to its last value, x[1] to the value before the last value

(
a = PSrecur({ |x| x[0] + x[1] }, start: [0, 1]);
b = a.iter;
b.nextN(10);
)

// shorter with partial application

PSrecur(_[0]+_[1], start: [0, 1]).iter.nextN(10);


// recursion with event patterns
// function calculates an iterated average of past event values for all keys,
// events at the end of the array are taken into account most.

(
u = { |e,f| e.copy.keysValuesChange { |k| e[k]+f[k]/2 } };
v = { |a| a.reduce(u) };
)

(
// three basic Events

e = (midinote: 65, dur: 0.75, amp: 0.1, pan: 0);
f = (midinote: 58, dur: 0.05, amp: 0.3, pan: -1);
g = (midinote: 92, dur: 0.05, amp: 0.4, pan: 1);

// mostly build "blurred" average of last five events,
// by chance disturbance by choosing a basic event

p = PSrecur({ |x| 0.8.coin.if { v.(x[..4]) }{ [e,f,f,g].choose } }, start: [e,f,e,g,e]);

q = p.trace.play;
)

q.stop;</textarea>
<div class='doclink'>helpfile source: <a href='file:///home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/HelpSource/Classes/PSrecur.schelp'>/home/stefan/.local/share/SuperCollider/downloaded-quarks/miSCellaneous_lib/HelpSource/Classes/PSrecur.schelp</a><br>link::Classes/PSrecur::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>